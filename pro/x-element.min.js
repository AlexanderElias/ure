/************************************************************************
Name: XElement
Version: 8.0.0
License: MPL-2.0
Author: Alexander Elias
Email: alex.steven.elis@gmail.com
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
************************************************************************/
var re=Object.defineProperty,se=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var q=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))ae.call(t,n)&&q(e,n,t[n]);if(I)for(var n of I(t))ie.call(t,n)&&q(e,n,t[n]);return e},F=(e,t)=>se(e,ce(t));var v=(e,t,n)=>new Promise((o,r)=>{var s=c=>{try{i(n.next(c))}catch(u){r(u)}},l=c=>{try{i(n.throw(c))}catch(u){r(u)}},i=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,l);i((n=n.apply(e,t)).next())});var C=function(e,...t){for(;e.lastChild;)e.removeChild(e.lastChild);if(t!=null&&t.length)for(let n of t)e.appendChild(typeof n=="string"?e.ownerDocument.createTextNode(n):n)},O=function(e,t){return e.indexOf(t)!==-1},z="trustedTypes"in window?window.trustedTypes.createPolicy("x-element",{createHTML:e=>e}):null,K=function(e){return z?z.createHTML(e):e};function R(e){switch(typeof e){case"undefined":return"";case"string":return e;case"number":return`${e}`;case"bigint":return`${e}`;case"boolean":return`${e}`;case"function":return`${e()}`;case"symbol":return String(e);case"object":return JSON.stringify(e);default:throw new Error("display - type not handled")}}var le=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noshade","hidden","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],k=le;var P=new WeakMap,w=Symbol("html");function M(e,...t){if(P.has(e)){let n=P.get(e);return{strings:e,expressions:t,values:t,template:n,symbol:w}}else{let n="",o=e.length-1;for(let s=0;s<o;s++)n+=`${e[s]}{{${s}}}`;n+=e[o];let r=document.createElement("template");return r.innerHTML=K(n),P.set(e,r),{strings:e,expressions:t,values:t,template:r,symbol:w}}}var j=["src","href","xlink:href"],ue=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_=function(e){return typeof e!="string"||!ue.test(e)},U=function(e,t,n,o,r){var s,l,i,c;if(o=o!=null?o:{},r=r!=null?r:{},(o==null?void 0:o.strings)!==r.strings){let u,m=t.previousSibling;for(;m!==e;)u=m==null?void 0:m.previousSibling,(s=m==null?void 0:m.parentNode)==null||s.removeChild(m),m=u;let g=r.template.content.cloneNode(!0);Y(g,r.values,n),document.adoptNode(g);let b=n.length;for(let y=0;y<b;y++)n[y]((l=o.values)==null?void 0:l[y],r.values[y]);(i=t.parentNode)==null||i.insertBefore(g,t)}else{let u=n.length;for(let m=0;m<u;m++)n[m]((c=o.values)==null?void 0:c[m],r.values[m])}},de=function(e,t,n,o,r){var c,u,m,g,b,y,d;o=o!=null?o:[],r=r!=null?r:[];let s=o.length,l=r.length,i=Math.min(s,l);for(let a=0;a<i;a++)n[a](o[a],r[a]);if(s<l){let a=document.createElement("template");for(let p=s;p<l;p++)if(((c=r[p])==null?void 0:c.constructor)===Object&&((u=r[p])==null?void 0:u.symbol)===w){let f=document.createTextNode(""),h=document.createTextNode(""),N=U.bind(null,f,h,[]);a.content.appendChild(f),a.content.appendChild(h),n.push(N),N(o[p],r[p])}else{let f=document.createTextNode(""),h=Z.bind(null,f);a.content.appendChild(f),n.push(h),h(o[p],r[p])}(m=t.parentNode)==null||m.insertBefore(a.content,t)}else if(s>l){for(let a=s-1;a>l-1;a--)if(((g=o[a])==null?void 0:g.constructor)===Object&&((b=o[a])==null?void 0:b.symbol)===w){let{template:p}=o[a],f=p.content.childNodes.length+2;for(;f--;)(y=t.parentNode)==null||y.removeChild(t.previousSibling)}else(d=t.parentNode)==null||d.removeChild(t.previousSibling);n.length=l}},Z=function(e,t,n){t!==n&&(e.textContent=n)},pe=function(e,t,n,o){if(n!==o){if(typeof n=="function"&&e.removeEventListener(t.name.slice(2),n),typeof o!="function")return console.warn(`XElement - attribute name "${t.name}" and value "${o}" not allowed`);e.addEventListener(t.name.slice(2),o)}},G=function(e,t,n,o){if(n===o)return;let r=!!o;r?e.setAttribute(t.name,""):e.removeAttribute(t.name),t.value=r,Reflect.set(e,t.name,t.value)},J=function(e,t,n,o){if(n===o)return;let r=R(o);t.value=r,Reflect.set(e,t.name,t.value),e.setAttribute(t.name,t.value)},me=function(e,t,n,o){if(n!==o){if(_(o)){e.removeAttribute(t.name),console.warn(`XElement - attribute name "${t.name}" and value "${o}" not allowed`);return}t.value=o,Reflect.set(e,t.name,t.value),e.setAttribute(t.name,t.value)}},Q=function(e,t,n,o){n!==o&&(t.value=o,Reflect.set(e,t.name,t.value),e.setAttribute(t.name,t.value))},fe=function(e,t,n,o){if(n===o)return;e.removeAttribute(n);let r=o==null?void 0:o.toLowerCase();r==="value"?(t.name=r,J(e,t,t.value,t.value)):r.startsWith("on")?console.warn(`XElement - dynamic attribute name "${o}" not allowed`):O(j,r)?console.warn(`XElement - dynamic attribute name "${o}" not allowed`):O(k,r)?(t.name=r,G(e,t,t.value,t.value)):(t.name=r,Q(e,t,t.value,t.value))},Y=function(e,t,n){var l,i,c,u,m,g,b,y;let o=document.createTreeWalker(document,5,null);o.currentNode=e;let r=0,s=e.firstChild;for(;(s=o.nextNode())!==null;)if(s.nodeType===Node.TEXT_NODE){let d=(i=(l=s.nodeValue)==null?void 0:l.indexOf("{{"))!=null?i:-1;if(d==-1)continue;d!=0&&(s.splitText(d),s=o.nextNode());let a=(u=(c=s.nodeValue)==null?void 0:c.indexOf("}}"))!=null?u:-1;if(a==-1)continue;a+2!=((m=s.nodeValue)==null?void 0:m.length)&&s.splitText(a+2);let p=t[r++];if((p==null?void 0:p.constructor)===Object&&(p==null?void 0:p.symbol)===w){let f=document.createTextNode(""),h=s;h.nodeValue="",(g=h.parentNode)==null||g.insertBefore(f,h),n.push(U.bind(null,f,h,[]))}else if((p==null?void 0:p.constructor)===Array){let f=document.createTextNode(""),h=s;h.nodeValue="",(b=h.parentNode)==null||b.insertBefore(f,h),n.push(de.bind(null,f,h,[]))}else s.textContent="",n.push(Z.bind(null,s))}else if(s.nodeType===Node.ELEMENT_NODE){let d=s.getAttributeNames();for(let a of d){let p=(y=s.getAttribute(a))!=null?y:"",f={name:a,value:p},h=a.includes("{{")&&a.includes("}}"),N=p.includes("{{")&&p.includes("}}");h&&(r++,s.removeAttribute(a),n.push(fe.bind(null,s,f))),N&&(r++,s.removeAttribute(a),a==="value"?n.push(J.bind(null,s,f)):a.startsWith("on")?n.push(pe.bind(null,s,f)):O(j,a)?n.push(me.bind(null,s,f)):O(k,a)?n.push(G.bind(null,s,f)):n.push(Q.bind(null,s,f))),!h&&!N&&(O(j,a)?_(p)&&(s.removeAttribute(a),console.warn(`XElement - attribute name "${a}" and value "${p}" not allowed`)):a.startsWith("on")&&(s.removeAttribute(a),console.warn(`XElement - attribute name "${a}" not allowed`)))}}else console.warn("node type not handled ",s.nodeType)},T=Y;var E=new WeakMap,V=Promise.resolve(),ee=function(e,t,n,o,r){if(typeof n=="symbol")return Reflect.set(t,n,o,r);let s=Reflect.get(t,n,r);if(s===o||Number.isNaN(s)&&Number.isNaN(o))return!0;if(s&&(s.constructor.name==="Object"||s.constructor.name==="Array"||s.constructor.name==="Function")){if(E.get(s)===o)return!0;E.delete(s)}return Reflect.set(t,n,o,r),V.then(e),!0},te=function(e,t,n,o){if(typeof n=="symbol")return Reflect.get(t,n,o);let r=Reflect.get(t,n,o);if(r&&(r.constructor.name==="Object"||r.constructor.name==="Array")){let s=E.get(r);if(s)return s;let l=new Proxy(r,{get:te.bind(null,e),set:ee.bind(null,e),deleteProperty:ne.bind(null,e)});return E.set(r,l),l}if(r&&t.constructor.name==="Object"&&(r.constructor.name==="Function"||r.constructor.name==="AsyncFunction")){let s=E.get(r);if(s)return s;let l=new Proxy(r,{apply(i,c,u){return Reflect.apply(i,o,u)}});return E.set(r,l),l}return r},ne=function(e,t,n){if(typeof n=="symbol")return Reflect.deleteProperty(t,n);let o=Reflect.get(t,n);return E.delete(o),Reflect.deleteProperty(t,n),V.then(e),!0},he=function(e,t){return new Proxy(e,{get:te.bind(null,t),set:ee.bind(null,t),deleteProperty:ne.bind(null,t)})},oe=he;function x(e){return e.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase()}var $=new WeakMap,Ue=new Event("adopted"),Ze=new Event("adopting"),L=new Event("upgraded"),S=new Event("upgrading"),ye=new Event("connected"),ge=new Event("connecting"),Ge=new Event("attributed"),Je=new Event("attributing"),be=new Event("disconnected"),ve=new Event("disconnecting"),Ee=function(){return v(this,null,function*(){var n;let e=(n=this.tag)!=null?n:x(this.name);return customElements.get(e)||customElements.define(e,this),document.createElement(e)})},xe=function(){var t;let e=(t=this.tag)!=null?t:x(this.name);customElements.get(e)&&customElements.define(e,this)},Oe=function(){return v(this,null,function*(){var t;let e=(t=this.tag)!=null?t:x(this.name);return customElements.whenDefined(e)})},we=function(e){return v(this,null,function*(){var r,s,l,i,c;let t=$.get(e);if(t.busy)return;t.busy=!0,e.dispatchEvent(S),yield(s=(r=e.upgrading)==null?void 0:r.call(e))==null?void 0:s.catch(console.error);let n=e.template(),o=(l=t.actions.length)!=null?l:0;for(let u=0;u<o;u++)t.actions[u](t.expressions[u],n.expressions[u]);t.expressions.splice(0,-1,...n.expressions),t.busy=!1,yield(c=(i=e.upgraded)==null?void 0:i.call(e))==null?void 0:c.catch(console.error),e.dispatchEvent(L)})},Ne=function(e){return v(this,null,function*(){var r,s,l,i;let t=$.get(e);if(t.mounted)return;t.mounted=!0,e.dispatchEvent(S),yield(s=(r=e.upgrading)==null?void 0:r.call(e))==null?void 0:s.catch(console.error);let n=e.template();t.expressions.splice(0,-1,...n.values),t.fragment=n.template.content.cloneNode(!0),T(t.fragment,t.expressions,t.actions),document.adoptNode(t.fragment);let o=t.actions.length;for(let c=0;c<o;c++)t.actions[c](void 0,t.expressions[c]);C(t.root,t.fragment),yield(i=(l=e.upgraded)==null?void 0:l.call(e))==null?void 0:i.catch(console.error),e.dispatchEvent(L)})},Ce=function(e,t,n){var g,b,y;let o=Reflect.construct(e,t,n),r=o.constructor,s=r.shadow,l=(g=r.tag)!=null?g:x(r.name),i=r.observedProperties,c=Object.getPrototypeOf(o),u={tag:l,context:{},busy:!1,actions:[],mounted:!1,expressions:[],fragment:void 0,shadow:s||!1,root:s?(b=o.shadowRoot)!=null?b:o.attachShadow({mode:"open"}):o};u.observed=oe(u.context,()=>we(o)),$.set(o,u);let m=i?i!=null?i:[]:[...Object.getOwnPropertyNames(o),...Object.getOwnPropertyNames(c)];for(let d of m){if(d==="attributeChangedCallback"||d==="attributing"||d==="attributed"||d==="adoptedCallback"||d==="adopting"||d==="adopted"||d==="disconnectedCallback"||d==="disconnecting"||d==="disconnected"||d==="connectedCallback"||d==="connecting"||d==="connected"||d==="upgradedCallback"||d==="upgrading"||d==="upgraded"||d==="constructor"||d==="template")continue;let a=(y=Object.getOwnPropertyDescriptor(o,d))!=null?y:Object.getOwnPropertyDescriptor(c,d);a&&a.configurable&&(Object.defineProperty(u.context,d,F(B({},a),{enumerable:!1})),Object.defineProperty(o,d,{enumerable:a.enumerable,configurable:a.configurable,get(){return u.observed[d]},set(p){u.observed[d]=p}}))}return o};function A(e){var l;e.create=Ee,e.define=xe,e.defined=Oe;let t=(l=e.tag)!=null?l:x(e.name),n=e.prototype.upgradedCallback,o=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;e.prototype.upgradedCallback=function(){return v(this,null,function*(){var i,c;this.dispatchEvent(S),yield(i=this.upgrading)==null?void 0:i.call(this),yield(c=this.upgraded)==null?void 0:c.call(this),this.dispatchEvent(L),yield n==null?void 0:n()})},e.prototype.connectedCallback=function(){return v(this,null,function*(){var i,c;this.dispatchEvent(ge),yield(i=this.connecting)==null?void 0:i.call(this),yield Ne(this),yield(c=this.connected)==null?void 0:c.call(this),this.dispatchEvent(ye),yield o==null?void 0:o()})},e.prototype.disconnectedCallback=function(){return v(this,null,function*(){var i,c;this.dispatchEvent(ve),yield(i=this.disconnecting)==null?void 0:i.call(this),yield(c=this.disconnected)==null?void 0:c.call(this),this.dispatchEvent(be),yield r==null?void 0:r()})};let s=new Proxy(e,{construct:Ce});return t&&!customElements.get(t)&&customElements.define(t,s),s}var H=[],X=[],Te=function(e){return!Object.keys(e).length||!!e.default&&typeof e.default=="object"&&!Object.keys(e.default).length},D=function(e){return v(this,null,function*(){if(e.instance)C(e.container,e.instance);else{let t="x-"+(e.path.replace(/\/+/g,"-").replace(/^-|-$|\.*/g,"")||"root"),n=yield e.handler(),o=Te(n)?n:n.default;customElements.get(t)||customElements.define(t,o),e.instance=document.createElement(t),C(e.container,e.instance)}})},Ae=function(e){var s,l,i;if(e&&"canIntercept"in e&&e.canIntercept===!1||e&&"canTransition"in e&&e.canTransition===!1)return;let t=new URL((s=e==null?void 0:e.destination.url)!=null?s:location.href),n=new URL((i=(l=document.querySelector("base"))==null?void 0:l.href)!=null?i:location.origin);n.hash="",n.search="",t.hash="",t.search="";let o=t.href.replace(n.href,"/"),r=[];for(let c of X)c.path===o&&r.push(c);for(let c of H){let u=!1;for(let m of r)if(m.container===c.container){u=!0;break}u||r.push(c)}if(e!=null&&e.intercept)return e.intercept({handler:()=>r.map(c=>D(c))});if(e!=null&&e.transitionWhile)return e.transitionWhile(r.map(c=>D(c)));r.map(c=>D(c))},Re=function(e,t,n){if(!e)throw new Error("XElement - router path required");if(!n)throw new Error("XElement - router handler required");if(!t)throw new Error("XElement - router container required");if(e==="/*"){for(let o of H)if(o.path===e&&o.container===t)throw new Error("XElement - router duplicate path on container");H.push({path:e,container:t,handler:n,instance:void 0})}else{for(let o of X)if(o.path===e&&o.container===t)throw new Error("XElement - router duplicate path on container");X.push({path:e,container:t,handler:n,instance:void 0})}Reflect.get(window,"navigation").addEventListener("navigate",Ae)},W=Re;var ke={Component:A,Router:W,Render:T,component:A,router:W,render:T,html:M},ct=ke;export{A as Component,T as Render,W as Router,A as component,ct as default,M as html,T as render,W as router};
//# sourceMappingURL=x-element.min.js.map
