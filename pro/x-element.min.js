/************************************************************************
Name: XElement
Version: 8.0.0
License: MPL-2.0
Author: Alexander Elias
Email: alex.steven.elis@gmail.com
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
************************************************************************/
var re=Object.defineProperty,se=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var D=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))ae.call(t,n)&&D(e,n,t[n]);if(X)for(var n of X(t))ie.call(t,n)&&D(e,n,t[n]);return e},F=(e,t)=>se(e,ce(t));var x=(e,t,n)=>new Promise((o,r)=>{var s=c=>{try{u(n.next(c))}catch(a){r(a)}},i=c=>{try{u(n.throw(c))}catch(a){r(a)}},u=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,i);u((n=n.apply(e,t)).next())});var N=function(e,...t){for(;e.lastChild;)e.removeChild(e.lastChild);if(t!=null&&t.length)for(let n of t)e.appendChild(typeof n=="string"?e.ownerDocument.createTextNode(n):n)},v=function(e,t){return e.indexOf(t)!==-1},q="trustedTypes"in window?window.trustedTypes.createPolicy("x-element",{createHTML:e=>e}):null,B=function(e){return q?q.createHTML(e):e};function R(e){switch(typeof e){case"undefined":return"";case"string":return e;case"number":return`${e}`;case"bigint":return`${e}`;case"boolean":return`${e}`;case"function":return`${e()}`;case"symbol":return String(e);case"object":return JSON.stringify(e);default:throw new Error("display - type not handled")}}var le=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noshade","hidden","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],M=le;var _=new WeakMap,O=Symbol("html"),de=function(e,...t){let n=_.get(e);if(n)return{strings:e,expressions:t,template:n,symbol:O};{let o="",r=e.length-1;for(let i=0;i<r;i++)o+=`${e[i]}{{${i}}}`;o+=e[r];let s=document.createElement("template");return s.innerHTML=B(o),_.set(e,s),{strings:e,expressions:t,template:s,symbol:O}}},z=de;var ue=NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,P=["src","href","xlink:href"],pe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,K=function(e){return typeof e!="string"||!pe.test(e)},U=function(e,t,n,o,r){var s,i,u,c;if(o=o!=null?o:{},r=r!=null?r:{},(o==null?void 0:o.strings)!==r.strings){let a,l=t.previousSibling;for(;l!==e;)a=l==null?void 0:l.previousSibling,(s=l==null?void 0:l.parentNode)==null||s.removeChild(l),l=a;let g=r.template.content.cloneNode(!0);Q(g,r.expressions,n),document.adoptNode(g);let p=n.length;for(let y=0;y<p;y++)n[y]((i=o.expressions)==null?void 0:i[y],r.expressions[y]);(u=t.parentNode)==null||u.insertBefore(g,t)}else{let a=n.length;for(let l=0;l<a;l++)n[l]((c=o.expressions)==null?void 0:c[l],r.expressions[l])}},me=function(e,t,n,o,r){var c,a,l,g,p,y,b;o=o!=null?o:[],r=r!=null?r:[];let s=o.length,i=r.length,u=Math.min(s,i);for(let d=0;d<u;d++)n[d](o[d],r[d]);if(s<i){let d=document.createElement("template");for(let m=s;m<i;m++)if(((c=r[m])==null?void 0:c.constructor)===Object&&((a=r[m])==null?void 0:a.symbol)===O){let f=document.createTextNode(""),h=document.createTextNode(""),w=U.bind(null,f,h,[]);d.content.appendChild(f),d.content.appendChild(h),n.push(w),w(o[m],r[m])}else{let f=document.createTextNode(""),h=Z.bind(null,f);d.content.appendChild(f),n.push(h),h(o[m],r[m])}(l=t.parentNode)==null||l.insertBefore(d.content,t)}else if(s>i){for(let d=s-1;d>i-1;d--)if(((g=o[d])==null?void 0:g.constructor)===Object&&((p=o[d])==null?void 0:p.symbol)===O){let{template:m}=o[d],f=m.content.childNodes.length+2;for(;f--;)(y=t.parentNode)==null||y.removeChild(t.previousSibling)}else(b=t.parentNode)==null||b.removeChild(t.previousSibling);n.length=i}},Z=function(e,t,n){t!==n&&(e.textContent=n)},fe=function(e,t,n,o){if(n!==o){if(typeof n=="function"&&e.removeEventListener(t.name.slice(2),n),typeof o!="function")return console.warn(`XElement - attribute name "${t.name}" and value "${o}" not allowed`);e.addEventListener(t.name.slice(2),o)}},G=function(e,t,n,o){if(n===o)return;let r=!!o;r?e.setAttribute(t.name,""):e.removeAttribute(t.name),t.value=r,Reflect.set(e,t.name,t.value)},J=function(e,t,n,o){if(n===o)return;let r=R(o);t.value=r,Reflect.set(e,t.name,t.value),e.setAttribute(t.name,t.value)},he=function(e,t,n,o){if(n===o)return;let r=encodeURI(o);if(K(r)){e.removeAttribute(t.name),console.warn(`XElement - attribute name "${t.name}" and value "${r}" not allowed`);return}t.value=r,Reflect.set(e,t.name,t.value),e.setAttribute(t.name,t.value)},Y=function(e,t,n,o){n!==o&&(t.value=o,Reflect.set(e,t.name,t.value),e.setAttribute(t.name,t.value))},ye=function(e,t,n,o){if(n===o)return;e.removeAttribute(n);let r=o==null?void 0:o.toLowerCase();r==="value"?(t.name=r,J(e,t,t.value,t.value)):r.startsWith("on")?console.warn(`XElement - dynamic attribute name "${o}" not allowed`):v(P,r)?console.warn(`XElement - dynamic attribute name "${o}" not allowed`):v(M,r)?(t.name=r,G(e,t,t.value,t.value)):(t.name=r,Y(e,t,t.value,t.value))},Q=function(e,t,n){var i,u,c,a,l,g,p,y;let o=document.createTreeWalker(document,ue,null);o.currentNode=e;let r=0,s=e.firstChild;for(;(s=o.nextNode())!==null;)if(s.nodeType===Node.TEXT_NODE){let b=(u=(i=s.nodeValue)==null?void 0:i.indexOf("{{"))!=null?u:-1;if(b==-1)continue;b!=0&&(s.splitText(b),s=o.nextNode());let d=(a=(c=s.nodeValue)==null?void 0:c.indexOf("}}"))!=null?a:-1;if(d==-1)continue;d+2!=((l=s.nodeValue)==null?void 0:l.length)&&s.splitText(d+2);let m=t[r++];if((m==null?void 0:m.constructor)===Object&&(m==null?void 0:m.symbol)===O){let f=document.createTextNode(""),h=s;h.nodeValue="",(g=h.parentNode)==null||g.insertBefore(f,h),n.push(U.bind(null,f,h,[]))}else if((m==null?void 0:m.constructor)===Array){let f=document.createTextNode(""),h=s;h.nodeValue="",(p=h.parentNode)==null||p.insertBefore(f,h),n.push(me.bind(null,f,h,[]))}else s.textContent="",n.push(Z.bind(null,s))}else if(s.nodeType===Node.ELEMENT_NODE){(s.nodeName==="SCRIPT"||s.nodeName==="STYLE")&&o.nextSibling();let b=s.getAttributeNames();for(let d of b){let m=(y=s.getAttribute(d))!=null?y:"",f={name:d,value:m},h=d.includes("{{")&&d.includes("}}"),w=m.includes("{{")&&m.includes("}}");h&&(r++,s.removeAttribute(d),n.push(ye.bind(null,s,f))),w&&(r++,s.removeAttribute(d),d==="value"?n.push(J.bind(null,s,f)):d.startsWith("on")?n.push(fe.bind(null,s,f)):v(P,d)?n.push(he.bind(null,s,f)):v(M,d)?n.push(G.bind(null,s,f)):n.push(Y.bind(null,s,f))),!h&&!w&&(v(P,d)?K(m)&&(s.removeAttribute(d),console.warn(`XElement - attribute name "${d}" and value "${m}" not allowed`)):d.startsWith("on")&&(s.removeAttribute(d),console.warn(`XElement - attribute name "${d}" not allowed`)))}}else console.warn(`XElement - node type "${s.nodeType}" not handled`)},T=Q;var E=new WeakMap,V=Promise.resolve(),ee=function(e,t,n,o,r){if(typeof n=="symbol")return Reflect.set(t,n,o,r);let s=Reflect.get(t,n,r);if(s===o||Number.isNaN(s)&&Number.isNaN(o))return!0;if(s&&(s.constructor.name==="Object"||s.constructor.name==="Array"||s.constructor.name==="Function")){if(E.get(s)===o)return!0;E.delete(s)}return Reflect.set(t,n,o,r),V.then(e),!0},te=function(e,t,n,o){if(typeof n=="symbol")return Reflect.get(t,n,o);let r=Reflect.get(t,n,o);if(r&&(r.constructor.name==="Object"||r.constructor.name==="Array")){let s=E.get(r);if(s)return s;let i=new Proxy(r,{get:te.bind(null,e),set:ee.bind(null,e),deleteProperty:ne.bind(null,e)});return E.set(r,i),i}if(r&&t.constructor.name==="Object"&&(r.constructor.name==="Function"||r.constructor.name==="AsyncFunction")){let s=E.get(r);if(s)return s;let i=new Proxy(r,{apply(u,c,a){return Reflect.apply(u,o,a)}});return E.set(r,i),i}return r},ne=function(e,t,n){if(typeof n=="symbol")return Reflect.deleteProperty(t,n);let o=Reflect.get(t,n);return E.delete(o),Reflect.deleteProperty(t,n),V.then(e),!0},ge=function(e,t){return new Proxy(e,{get:te.bind(null,t),set:ee.bind(null,t),deleteProperty:ne.bind(null,t)})},oe=ge;function C(e){return e.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase()}var S=new WeakMap,Ke=new Event("adopted"),Ue=new Event("adopting"),L=new Event("upgraded"),k=new Event("upgrading"),be=new Event("connected"),xe=new Event("connecting"),Ze=new Event("attributed"),Ge=new Event("attributing"),Ee=new Event("disconnected"),ve=new Event("disconnecting"),Oe=function(e){return x(this,null,function*(){var r,s,i,u,c;let t=S.get(e);if(t.busy)return;t.busy=!0,e.dispatchEvent(k),yield(s=(r=e.upgrading)==null?void 0:r.call(e))==null?void 0:s.catch(console.error);let n=e.template(),o=(i=t.actions.length)!=null?i:0;for(let a=0;a<o;a++){let l=n.expressions[a],g=t.expressions[a];t.actions[a](g,l),t.expressions[a]=l}t.busy=!1,yield(c=(u=e.upgraded)==null?void 0:u.call(e))==null?void 0:c.catch(console.error),e.dispatchEvent(L)})},we=function(e){return x(this,null,function*(){var r,s,i,u;let t=S.get(e);if(t.mounted)return;t.mounted=!0,e.dispatchEvent(k),yield(s=(r=e.upgrading)==null?void 0:r.call(e))==null?void 0:s.catch(console.error);let n=e.template();t.fragment=n.template.content.cloneNode(!0),T(t.fragment,n.expressions,t.actions),document.adoptNode(t.fragment);let o=t.actions.length;for(let c=0;c<o;c++){let a=n.expressions[c];t.actions[c](void 0,a),t.expressions[c]=a}N(t.root,t.fragment),yield(u=(i=e.upgraded)==null?void 0:i.call(e))==null?void 0:u.catch(console.error),e.dispatchEvent(L)})},Ne=function(e){var a,l,g;let t=e.constructor,n=t.define||!1,o=t.shadow||!1,r=(a=t.tag)!=null?a:C(t.name),s=t.observedProperties,i=Object.getPrototypeOf(e),u={tag:r,define:n,shadow:o,context:{},busy:!1,actions:[],mounted:!1,expressions:[],fragment:void 0,root:o?(l=e.shadowRoot)!=null?l:e.attachShadow({mode:"open"}):e};u.observed=oe(u.context,()=>Oe(e)),S.set(e,u);let c=s?s!=null?s:[]:[...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(i)];for(let p of c){if(p==="attributeChangedCallback"||p==="attributing"||p==="attributed"||p==="adoptedCallback"||p==="adopting"||p==="adopted"||p==="disconnectedCallback"||p==="disconnecting"||p==="disconnected"||p==="connectedCallback"||p==="connecting"||p==="connected"||p==="upgradedCallback"||p==="upgrading"||p==="upgraded"||p==="constructor"||p==="template")continue;let y=(g=Object.getOwnPropertyDescriptor(e,p))!=null?g:Object.getOwnPropertyDescriptor(i,p);y&&y.configurable&&(Object.defineProperty(u.context,p,F(W({},y),{enumerable:!1})),Object.defineProperty(e,p,{enumerable:y.enumerable,configurable:y.configurable,get(){return u.observed[p]},set(b){u.observed[p]=b}}))}return e};function A(e){var u,c;let t=(u=e.define)!=null?u:!1,n=(c=e.tag)!=null?c:C(e.name),o=e.prototype.upgradedCallback,r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;e.prototype.upgradedCallback=function(){return x(this,null,function*(){var a,l;this.dispatchEvent(k),yield(a=this.upgrading)==null?void 0:a.call(this),yield(l=this.upgraded)==null?void 0:l.call(this),this.dispatchEvent(L),yield o==null?void 0:o()})},e.prototype.connectedCallback=function(){return x(this,null,function*(){var a,l;this.dispatchEvent(xe),yield(a=this.connecting)==null?void 0:a.call(this),yield we(this),yield(l=this.connected)==null?void 0:l.call(this),this.dispatchEvent(be),yield r==null?void 0:r()})},e.prototype.disconnectedCallback=function(){return x(this,null,function*(){var a,l;this.dispatchEvent(ve),yield(a=this.disconnecting)==null?void 0:a.call(this),yield(l=this.disconnected)==null?void 0:l.call(this),this.dispatchEvent(Ee),yield s==null?void 0:s()})};let i=new Proxy(e,{construct(a,l,g){return Ne(Reflect.construct(a,l,g))}});return t&&(customElements.get(n)||customElements.define(n,i)),i}var $=[],j=[],Te=function(e){return!Object.keys(e).length||!!e.default&&typeof e.default=="object"&&!Object.keys(e.default).length},H=function(e){return x(this,null,function*(){if(e.instance)N(e.container,e.instance);else{let t="x-"+(e.path.replace(/\/+/g,"-").replace(/^-|-$|\.*/g,"")||"root"),n=yield e.handler(),o=Te(n)?n:n.default;customElements.get(t)||customElements.define(t,o),e.instance=document.createElement(t),N(e.container,e.instance)}})},Ce=function(e){var s,i,u;if(e&&"canIntercept"in e&&e.canIntercept===!1||e&&"canTransition"in e&&e.canTransition===!1)return;let t=new URL((s=e==null?void 0:e.destination.url)!=null?s:location.href),n=new URL((u=(i=document.querySelector("base"))==null?void 0:i.href)!=null?u:location.origin);n.hash="",n.search="",t.hash="",t.search="";let o=t.href.replace(n.href,"/"),r=[];for(let c of j)c.path===o&&r.push(c);for(let c of $){let a=!1;for(let l of r)if(l.container===c.container){a=!0;break}a||r.push(c)}if(e!=null&&e.intercept)return e.intercept({handler:()=>r.map(c=>H(c))});if(e!=null&&e.transitionWhile)return e.transitionWhile(r.map(c=>H(c)));r.map(c=>H(c))},Ae=function(e,t,n){if(!e)throw new Error("XElement - router path required");if(!n)throw new Error("XElement - router handler required");if(!t)throw new Error("XElement - router container required");if(e==="/*"){for(let o of $)if(o.path===e&&o.container===t)throw new Error("XElement - router duplicate path on container");$.push({path:e,container:t,handler:n,instance:void 0})}else{for(let o of j)if(o.path===e&&o.container===t)throw new Error("XElement - router duplicate path on container");j.push({path:e,container:t,handler:n,instance:void 0})}Reflect.get(window,"navigation").addEventListener("navigate",Ce)},I=Ae;var Re={Component:A,Router:I,Render:T,component:A,router:I,render:T,html:z},st=Re;export{A as Component,T as Render,I as Router,A as component,st as default,z as html,T as render,I as router};
//# sourceMappingURL=x-element.min.js.map
