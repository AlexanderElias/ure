{
  "version": 3,
  "sources": ["../src/poly.ts", "../src/display.ts", "../src/booleans.ts", "../src/html.ts", "../src/render.ts", "../src/observe.ts", "../src/dash.ts", "../src/component.ts", "../src/router.ts", "../src/index.ts"],
  "sourcesContent": ["\nexport const replaceChildren = function (element: Element | Document | DocumentFragment, ...nodes: (Node | string)[]): void {\n\n    while (element.lastChild) {\n        element.removeChild(element.lastChild);\n\n    }\n\n    if (nodes?.length) {\n        for (const node of nodes) {\n            element.appendChild(\n                typeof node === 'string' ?\n                (element.ownerDocument as Document).createTextNode(node) :\n                node\n            );\n        }\n    }\n\n};\n\nexport const includes = function (item: string | Array<any>, search: any) {\n    return item.indexOf(search) !== -1;\n};\n\nconst policy = 'trustedTypes' in window ? (window as any).trustedTypes.createPolicy('x-element', { createHTML: (data:string) => data }) : null;\nexport const createHTML = function (data: string) {\n    if (policy) {\n        return policy.createHTML(data);\n    } else {\n        return data;\n    }\n}\n\nexport const hasOwn = function (object:any, key:any) {\n    return Object.prototype.hasOwnProperty.call(object, key);\n}", "export default function display(data: any): string {\n    switch (typeof data) {\n        case 'undefined':\n            return '';\n        case 'string':\n            return data;\n        case 'number':\n            return `${data}`;\n        case 'bigint':\n            return `${data}`;\n        case 'boolean':\n            return `${data}`;\n        case 'function':\n            return `${data()}`;\n        case 'symbol':\n            return String(data);\n        case 'object':\n            return JSON.stringify(data);\n        default:\n            throw new Error('display - type not handled');\n    }\n}\n", "const booleans = [\n    'allowfullscreen',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'compact',\n    'controls',\n    'declare',\n    'default',\n    'defaultchecked',\n    'defaultmuted',\n    'defaultselected',\n    'defer',\n    'disabled',\n    'draggable',\n    'enabled',\n    'formnovalidate',\n    'indeterminate',\n    'inert',\n    'ismap',\n    'itemscope',\n    'loop',\n    'multiple',\n    'muted',\n    'nohref',\n    'noshade',\n    'hidden',\n    'novalidate',\n    'nowrap',\n    'open',\n    'pauseonexit',\n    'readonly',\n    'required',\n    'reversed',\n    'scoped',\n    'seamless',\n    'selected',\n    'sortable',\n    'spellcheck',\n    'translate',\n    'truespeed',\n    'typemustmatch',\n    'visible',\n];\n\nexport default booleans;\n", "import { createHTML } from './poly';\n// import parse from './parse';\n\nexport const HtmlCache = new WeakMap();\nexport const HtmlSymbol = Symbol('html');\n\ntype TemplateExpressionsArray = any[];\n\n// export class H {\n//     strings:TemplateStringsArray;\n//     expressions:TemplateExpressionsArray;\n//     template: HTMLTemplateElement;\n//     constructor(strings: TemplateStringsArray, expressions: TemplateExpressionsArray, template: HTMLTemplateElement) {\n//         this.strings = strings;\n//         this.expressions = expressions;\n//         this.template = template;\n//     }\n// }\n\nexport default function html(strings: TemplateStringsArray, ...expressions: TemplateExpressionsArray) {\n    if (HtmlCache.has(strings)) {\n        const template = HtmlCache.get(strings);\n        // return new H(strings, expressions, template);\n        return { strings, expressions, values:expressions, template, symbol: HtmlSymbol };\n    } else {\n        let data = '';\n\n        const length = strings.length - 1;\n\n        for (let index = 0; index < length; index++) {\n            data += `${strings[index]}{{${index}}}`;\n        }\n\n        data += strings[length];\n\n        const template = document.createElement('template');\n        template.innerHTML = createHTML(data);\n\n        // const template = parse(data);\n\n        HtmlCache.set(strings, template);\n\n        // return new H(strings, expressions, template);\n        return { strings, expressions, values:expressions, template, symbol: HtmlSymbol };\n    }\n}\n", "import display from './display';\nimport booleans from './booleans';\nimport { HtmlSymbol } from './html';\nimport { includes } from './poly';\n\ntype Value = any;\ntype OldValue = Value;\ntype NewValue = Value;\ntype Values = Array<Value>;\ntype Actions = Array<(oldValue: OldValue, newValue: NewValue) => void>;\n\nconst links= [ 'src', 'href', 'xlink:href' ];\nconst safePattern = /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i;\n\nconst dangerousLink = function (data: string) {\n    return typeof data !== 'string' || !safePattern.test(data);\n};\n\nconst ObjectAction = function (start: Text, end: Text, actions: Actions, oldValue: OldValue, newValue: NewValue) {\n    oldValue = oldValue ?? {};\n    newValue = newValue ?? {};\n\n    if (oldValue?.strings !== newValue.strings) {\n        let next;\n        let node = end.previousSibling;\n        while (node !== start) {\n            next = node?.previousSibling as ChildNode;\n            node?.parentNode?.removeChild(node);\n            node = next;\n        }\n\n        const fragment = newValue.template.content.cloneNode(true);\n        RenderWalk(fragment, newValue.values, actions);\n        document.adoptNode(fragment);\n\n        const l = actions.length;\n        for (let i = 0; i < l; i++) {\n            actions[i](oldValue.values?.[i], newValue.values[i]);\n        }\n\n        end.parentNode?.insertBefore(fragment, end);\n    } else {\n        const l = actions.length;\n        for (let i = 0; i < l; i++) {\n            actions[i](oldValue.values?.[i], newValue.values[i]);\n        }\n    }\n};\n\nconst ArrayAction = function (start: Text, end: Text, actions: Actions, oldValue: OldValue, newValue: NewValue) {\n    oldValue = oldValue ?? [];\n    newValue = newValue ?? [];\n\n    const oldLength = oldValue.length;\n    const newLength = newValue.length;\n    const common = Math.min(oldLength, newLength);\n\n    for (let i = 0; i < common; i++) {\n        actions[i](oldValue[i], newValue[i]);\n    }\n\n    if (oldLength < newLength) {\n        const template = document.createElement('template');\n        for (let i = oldLength; i < newLength; i++) {\n            if (newValue[i]?.constructor === Object && newValue[i]?.symbol === HtmlSymbol) {\n                const start = document.createTextNode('');\n                const end = document.createTextNode('');\n                const action = ObjectAction.bind(null, start, end, []);\n                template.content.appendChild(start);\n                template.content.appendChild(end);\n                actions.push(action);\n                action(oldValue[i], newValue[i]);\n            } else {\n                const node = document.createTextNode('');\n                const action = StandardAction.bind(null, node as Text);\n                template.content.appendChild(node);\n                actions.push(action);\n                action(oldValue[i], newValue[i]);\n            }\n        }\n        end.parentNode?.insertBefore(template.content as Node, end);\n    } else if (oldLength > newLength) {\n        for (let i = oldLength-1; i > newLength-1; i--) {\n            if (oldValue[i]?.constructor === Object && oldValue[i]?.symbol === HtmlSymbol) {\n                const { template } = oldValue[i];\n                let removes = template.content.childNodes.length + 2;\n                while (removes--) end.parentNode?.removeChild(end.previousSibling as Node);\n            } else {\n                end.parentNode?.removeChild(end.previousSibling as Node);\n            }\n        }\n        actions.length = newLength;\n    }\n};\n\nconst StandardAction = function (node: Text, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n    node.textContent = newValue;\n};\n\nconst AttributeOn = function (element: Element, attribute: { name: string; value: string }, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n    if (typeof oldValue === 'function') element.removeEventListener(attribute.name.slice(2), oldValue);\n    if (typeof newValue !== 'function') return console.warn(`XElement - attribute name \"${attribute.name}\" and value \"${newValue}\" not allowed`);\n    element.addEventListener(attribute.name.slice(2), newValue);\n};\n\nconst AttributeBoolean = function (element: Element, attribute: { name: string; value: any }, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n\n    const value = newValue ? true : false;\n    if (value) element.setAttribute(attribute.name, '');\n    else element.removeAttribute(attribute.name);\n\n    attribute.value = value;\n    Reflect.set(element, attribute.name, attribute.value);\n};\n\nconst AttributeValue = function (element: Element, attribute: { name: string; value: string }, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n    const value = display(newValue);\n    attribute.value = value;\n    Reflect.set(element, attribute.name, attribute.value);\n    element.setAttribute(attribute.name, attribute.value);\n};\n\nconst AttributeLink = function (element: Element, attribute: { name: string; value: string }, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n\n    if (dangerousLink(newValue)) {\n        element.removeAttribute(attribute.name);\n        console.warn(`XElement - attribute name \"${attribute.name}\" and value \"${newValue}\" not allowed`);\n        return;\n    }\n\n    attribute.value = newValue;\n    Reflect.set(element, attribute.name, attribute.value);\n    element.setAttribute(attribute.name, attribute.value);\n};\n\nconst AttributeStandard = function (element: Element, attribute: { name: string; value: string }, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n    attribute.value = newValue;\n    Reflect.set(element, attribute.name, attribute.value);\n    element.setAttribute(attribute.name, attribute.value);\n};\n\nconst AttributeName = function (element: Element, attribute: { name: string; value: string }, oldValue: OldValue, newValue: NewValue) {\n    if (oldValue === newValue) return;\n    element.removeAttribute(oldValue);\n\n    const name = newValue?.toLowerCase();\n\n    if (name === 'value') {\n        attribute.name = name;\n        AttributeValue(element, attribute, attribute.value, attribute.value);\n    } else if (name.startsWith('on')) {\n        console.warn(`XElement - dynamic attribute name \"${newValue}\" not allowed`);\n    } else if (includes(links, name)) {\n        console.warn(`XElement - dynamic attribute name \"${newValue}\" not allowed`);\n    } else if (includes(booleans, name)) {\n        attribute.name = name;\n        AttributeBoolean(element, attribute, attribute.value, attribute.value);\n    } else {\n        attribute.name = name;\n        AttributeStandard(element, attribute, attribute.value, attribute.value);\n    }\n\n    // if (\n    //     typeof newValue !== 'string' ||\n    //     newValue.startsWith('on') ||\n    //     links.includes(newValue)\n    // ) return console.warn(`XElement - dynamic attribute name \"${newValue}\" not allowed`);\n\n    // attribute.name = newValue;\n    // element.setAttribute(attribute.name, attribute.value);\n};\n\nexport const RenderWalk = function (fragment: DocumentFragment, values: Values, actions: Actions) {\n    const walker = document.createTreeWalker(document, 5, null);\n\n    walker.currentNode = fragment;\n\n    let index = 0;\n    let node: Node | null = fragment.firstChild;\n\n    while ((node = walker.nextNode()) !== null) {\n        if (node.nodeType === Node.TEXT_NODE) {\n\n            const start = node.nodeValue?.indexOf('{{') ?? -1;\n\n            if (start == -1) continue;\n\n            if (start != 0) {\n                (node as Text).splitText(start);\n                node = walker.nextNode() as Node;\n            }\n\n            const end = node.nodeValue?.indexOf('}}') ?? -1;\n\n            if (end == -1) continue;\n\n            if (end + 2 != node.nodeValue?.length) {\n                (node as Text).splitText(end + 2);\n            }\n\n            const newValue = values[index++];\n\n            if (newValue?.constructor === Object && newValue?.symbol === HtmlSymbol) {\n                const start = document.createTextNode('');\n                const end = node;\n                end.nodeValue = '';\n                end.parentNode?.insertBefore(start, end);\n                actions.push(ObjectAction.bind(null, start as Text, end as Text, []));\n            } else if (newValue?.constructor === Array) {\n                const start = document.createTextNode('');\n                const end = node;\n                end.nodeValue = '';\n                end.parentNode?.insertBefore(start, end);\n                actions.push(ArrayAction.bind(null, start as Text, end as Text, []));\n            } else {\n                (node as Text).textContent = '';\n                actions.push(StandardAction.bind(null, node as Text));\n            }\n        } else if (node.nodeType === Node.ELEMENT_NODE) {\n            const names = (node as Element).getAttributeNames();\n            for (const name of names) {\n                const value = (node as Element).getAttribute(name) ?? '';\n                const attribute = { name, value };\n\n                const dynamicName = name.includes('{{') && name.includes('}}');\n                const dynamicValue = value.includes('{{') && value.includes('}}');\n\n                if (dynamicName) {\n                    index++;\n                    (node as Element).removeAttribute(name);\n                    actions.push(\n                        AttributeName.bind(null, node as Element, attribute),\n                    );\n                }\n\n                if (dynamicValue) {\n                    index++;\n                    (node as Element).removeAttribute(name);\n                    if (name === 'value') {\n                        actions.push(\n                            AttributeValue.bind(null, node as Element, attribute),\n                        );\n                    } else if (name.startsWith('on')) {\n                        actions.push(\n                            AttributeOn.bind(null, node as Element, attribute),\n                        );\n                    } else if (includes(links, name)) {\n                        actions.push(\n                            AttributeLink.bind(null, node as Element, attribute),\n                        );\n                    } else if (includes(booleans, name)) {\n                        actions.push(\n                            AttributeBoolean.bind(null, node as Element, attribute),\n                        );\n                    } else {\n                        actions.push(\n                            AttributeStandard.bind(null, node as Element, attribute),\n                        );\n                    }\n                }\n\n                if (!dynamicName && !dynamicValue) {\n                    if (includes(links, name)) {\n                        if (dangerousLink(value)) {\n                            (node as Element).removeAttribute(name);\n                            console.warn(`XElement - attribute name \"${name}\" and value \"${value}\" not allowed`);\n                        }\n                    } else if (name.startsWith('on')) {\n                        (node as Element).removeAttribute(name);\n                        console.warn(`XElement - attribute name \"${name}\" not allowed`);\n                    }\n                }\n\n            }\n        } else {\n            console.warn('node type not handled ', node.nodeType);\n        }\n    }\n};\n\nexport default RenderWalk;\n", "export type ObserveValue = any;\nexport type ObserveTarget = any;\nexport type ObserveReceiver = any;\nexport type ObserveMethod = () => void;\nexport type ObserveKey = symbol | string;\nexport type ObserveData = Record<string, any>;\n\nconst ObserveCache = new WeakMap();\nconst ObserveNext = Promise.resolve();\n\nconst ObserveSet = function (method: ObserveMethod, target: ObserveTarget, key: ObserveKey, value: ObserveValue, receiver: ObserveReceiver) {\n    if (typeof key === 'symbol') return Reflect.set(target, key, value, receiver);\n\n    const from = Reflect.get(target, key, receiver);\n\n    if (from === value) return true;\n    if (Number.isNaN(from) && Number.isNaN(value)) return true;\n\n    if (from && (from.constructor.name === 'Object' || from.constructor.name === 'Array' || from.constructor.name === 'Function')) {\n        const cache = ObserveCache.get(from);\n        if (cache === value) return true;\n        ObserveCache.delete(from);\n    }\n\n    Reflect.set(target, key, value, receiver);\n\n    ObserveNext.then(method);\n\n    return true;\n};\n\nconst ObserveGet = function (method: ObserveMethod, target: ObserveTarget, key: ObserveKey, receiver: ObserveReceiver): ObserveValue {\n    if (typeof key === 'symbol') return Reflect.get(target, key, receiver);\n\n    const value = Reflect.get(target, key, receiver);\n\n    if (value && (value.constructor.name === 'Object' || value.constructor.name === 'Array')) {\n        const cache = ObserveCache.get(value);\n        if (cache) return cache;\n\n        const proxy = new Proxy(value, {\n            get: ObserveGet.bind(null, method),\n            set: ObserveSet.bind(null, method),\n            deleteProperty: ObserveDelete.bind(null, method),\n        });\n\n        ObserveCache.set(value, proxy);\n        return proxy;\n    }\n\n    if (value && target.constructor.name === 'Object' && (value.constructor.name === 'Function' || value.constructor.name === 'AsyncFunction')) {\n        const cache = ObserveCache.get(value);\n        if (cache) return cache;\n\n        const proxy = new Proxy(value, {\n            apply(t, _, a) {\n                return Reflect.apply(t, receiver, a);\n            },\n        });\n\n        ObserveCache.set(value, proxy);\n        return proxy;\n    }\n\n    return value;\n};\n\nconst ObserveDelete = function (method: ObserveMethod, target: ObserveTarget, key: ObserveKey) {\n    if (typeof key === 'symbol') return Reflect.deleteProperty(target, key);\n\n    const from = Reflect.get(target, key);\n    ObserveCache.delete(from);\n    Reflect.deleteProperty(target, key);\n\n    ObserveNext.then(method);\n\n    return true;\n};\n\nconst Observe = function (data: ObserveData, method: ObserveMethod) {\n    return new Proxy(data, {\n        get: ObserveGet.bind(null, method),\n        set: ObserveSet.bind(null, method),\n        deleteProperty: ObserveDelete.bind(null, method),\n    });\n};\n\nexport default Observe;\n", "export default function dash(data: string): string {\n    return data.replace(/([a-zA-Z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n", "import { replaceChildren } from './poly';\nimport render from './render';\nimport observe from './observe';\nimport dash from './dash';\n\ninterface ComponentInstance extends HTMLElement {\n\n    // adopted?:any;\n    // adopting?:any;\n    adoptedCallback?:any;\n\n    upgraded?:any;\n    upgrading?:any;\n    upgradedCallback?:any;\n\n    connected?:any;\n    connecting?:any;\n    connectedCallback?:any;\n\n    disconnected?:any;\n    disconnecting?:any;\n    disconnectedCallback?:any;\n\n    // attributed?:any;\n    // attributing?:any;\n    attributeChangedCallback?:any;\n\n    template:()=>any;\n}\n\ninterface ComponentConstructor {\n\n    tag?:string;\n    shadow?:boolean;\n    observedProperties?: string[];\n\n    create?: typeof create;\n    define?: typeof define;\n    defined?: typeof defined;\n\n    new (): ComponentInstance;\n}\n\nconst Components = new WeakMap();\n\n// const DEFINED = new WeakSet();\n// const CE = window.customElements;\n// Object.defineProperty(window, 'customElements', {\n//     get: () => ({\n//         define(name: string, constructor: CustomElementConstructor, options?: ElementDefinitionOptions) {\n//             if (constructor.prototype instanceof Component && !DEFINED.has(constructor)) {\n//                 constructor = new Proxy(constructor, {\n//                     construct(target, args, extender) {\n//                         const instance = Reflect.construct(target, args, extender);\n//                             mount(instance);\n//                         return instance;\n//                     },\n//                 });\n\n//                 DEFINED.add(constructor);\n//             }\n//             CE.define(name, constructor, options);\n//         },\n//         get: CE.get,\n//         whenDefined: CE.whenDefined,\n//     }),\n// });\n\nconst adoptedEvent = new Event('adopted');\nconst adoptingEvent = new Event('adopting');\n\nconst upgradedEvent = new Event('upgraded');\nconst upgradingEvent = new Event('upgrading');\n\nconst connectedEvent = new Event('connected');\nconst connectingEvent = new Event('connecting');\n\nconst attributedEvent = new Event('attributed');\nconst attributingEvent = new Event('attributing');\n\nconst disconnectedEvent = new Event('disconnected');\nconst disconnectingEvent = new Event('disconnecting');\n\nconst create = async function (this:ComponentConstructor) {\n    const tag = this.tag ?? dash(this.name);\n\n    if (!customElements.get(tag)) {\n        customElements.define(tag, this);\n    }\n\n    const element = document.createElement(tag) as ComponentInstance;\n    // await mount(element);\n\n    return element;\n};\n\nconst define = function (this:ComponentConstructor) {\n    const tag = this.tag ?? dash(this.name);\n    if (!customElements.get(tag)) return;\n    customElements.define(tag, this);\n};\n\nconst defined = async function (this:ComponentConstructor) {\n    const tag = this.tag ?? dash(this.name);\n    return customElements.whenDefined(tag);\n};\n\nconst upgrade = async function (self:ComponentInstance) {\n    const instance = Components.get(self);\n\n    if (instance.busy) return;\n    else instance.busy = true;\n\n    // await sleep(50);\n    self.dispatchEvent(upgradingEvent);\n    await self.upgrading?.()?.catch(console.error);\n\n    const result = self.template();\n\n    const length = instance.actions.length ?? 0;\n    for (let index = 0; index < length; index++) {\n        instance.actions[index](instance.expressions[index], result.expressions[index]);\n    }\n\n    instance.expressions.splice(0, -1, ...result.expressions);\n\n    instance.busy = false;\n\n    await self.upgraded?.()?.catch(console.error);\n    self.dispatchEvent(upgradedEvent);\n};\n\nconst mount = async function (self:ComponentInstance) {\n    const instance = Components.get(self);\n\n    if (instance.mounted) return;\n    else instance.mounted = true;\n\n    self.dispatchEvent(upgradingEvent);\n    await self.upgrading?.()?.catch(console.error);\n\n    const result = self.template();\n\n    instance.expressions.splice(0, -1, ...result.values);\n    instance.fragment = result.template.content.cloneNode(true);\n\n    render(instance.fragment, instance.expressions, instance.actions);\n\n    document.adoptNode(instance.fragment);\n\n    const length = instance.actions.length;\n    for (let index = 0; index < length; index++) {\n        instance.actions[index](undefined, instance.expressions[index]);\n    }\n\n    replaceChildren(instance.root, instance.fragment);\n\n    await self.upgraded?.()?.catch(console.error);\n    self.dispatchEvent(upgradedEvent);\n};\n\n// const get = function (t:any, k:any, r:any){\n//     console.log('get', k);\n//     return Reflect.get(t, k, r);\n// };\n\n// const set = function (t:any, k:any, v:any, r:any) {\n//     console.log('set', k, v);\n//     return Reflect.set(t,k,v,r);\n// };\n\nconst construct = function (t:any, a:any, e:any) {\n    const self = Reflect.construct(t, a, e) as ComponentInstance;\n    const constructor = self.constructor as ComponentConstructor;\n\n    const shadow = constructor.shadow;\n    const tag = constructor.tag ?? dash(constructor.name);\n    const observedProperties = constructor.observedProperties;\n    const prototype = Object.getPrototypeOf(self);\n\n    const instance:any = {\n        tag,\n        context: {},\n        busy: false,\n        actions: [],\n        mounted: false,\n        expressions: [],\n        fragment: undefined,\n        shadow: shadow || false,\n        root: shadow ?  self.shadowRoot ?? self.attachShadow({ mode: 'open' }) : self\n    };\n\n    instance.observed = observe(instance.context, ()=> upgrade(self)),\n\n    Components.set(self, instance);\n\n    const properties = observedProperties ?\n        observedProperties ?? [] :\n        [ ...Object.getOwnPropertyNames(self),\n            ...Object.getOwnPropertyNames(prototype) ];\n\n    for (const property of properties) {\n\n        if (\n            'attributeChangedCallback' === property ||\n            'attributing' === property ||\n            'attributed' === property ||\n\n            'adoptedCallback' === property ||\n            'adopting' === property ||\n            'adopted' === property ||\n\n            'disconnectedCallback' === property ||\n            'disconnecting' === property ||\n            'disconnected' === property ||\n\n            'connectedCallback' === property ||\n            'connecting' === property ||\n            'connected' === property ||\n\n            'upgradedCallback' === property ||\n            'upgrading' === property ||\n            'upgraded' === property ||\n\n            'constructor' === property ||\n            'template' === property\n\n        ) continue;\n\n        const descriptor = Object.getOwnPropertyDescriptor(self, property) ?? Object.getOwnPropertyDescriptor(prototype, property);\n\n        if (!descriptor) continue;\n        if (!descriptor.configurable) continue;\n\n        Object.defineProperty(instance.context, property, { ...descriptor, enumerable: false });\n\n        Object.defineProperty(self, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            get() {\n                return instance.observed[property];\n            },\n            set(value) {\n                instance.observed[property] = value;\n                // upgrade(self);\n            }\n        });\n\n    }\n\n    // if (tag) {\n        // customElements.upgrade(self);\n        // customElements.whenDefined(tag).then(()=> mount(self));\n    // }\n\n    return self;\n};\n\nexport default function component (Class:ComponentConstructor):ComponentConstructor {\n    Class.create = create;\n    Class.define = define;\n    Class.defined = defined;\n\n    const tag = Class.tag ?? dash(Class.name);\n    const upgradedCallback = Class.prototype.upgradedCallback;\n    const connectedCallback = Class.prototype.connectedCallback;\n    const disconnectedCallback = Class.prototype.disconnectedCallback;\n\n    Class.prototype.upgradedCallback = async function () {\n        this.dispatchEvent(upgradingEvent);\n        await this.upgrading?.();\n        await this.upgraded?.();\n        this.dispatchEvent(upgradedEvent);\n        await upgradedCallback?.();\n    };\n\n    Class.prototype.connectedCallback = async function () {\n        this.dispatchEvent(connectingEvent);\n        await this.connecting?.();\n        await mount(this);\n        await this.connected?.();\n        this.dispatchEvent(connectedEvent);\n        await connectedCallback?.();\n    };\n\n    Class.prototype.disconnectedCallback = async function () {\n        this.dispatchEvent(disconnectingEvent);\n        await this.disconnecting?.();\n        await this.disconnected?.();\n        this.dispatchEvent(disconnectedEvent);\n        await disconnectedCallback?.();\n    };\n\n    const Wrap = new Proxy(Class, { construct });\n    // const Wrap = new Proxy(Class, { get, set, construct });\n\n    if (tag && !customElements.get(tag)) {\n        customElements.define(tag, Wrap as any);\n    }\n\n    return Wrap;\n};\n\n// component(\n// class XTest extends HTMLElement {\n//     // static tag = 'x-test';\n//     // static shadow = true;\n//     // static observedProperties = ['message'];\n\n//     message = 'hello world';\n\n//     template = () => html`\n//         <h1>${this.message}</h1>\n//         <input value=${this.message} oninput=${(e:any)=>this.message=e.target.value} />\n//     `;\n\n//     connectedCallback(){console.log('connectedCallback');}\n//     disconnectedCallback(){console.log('disconnectedCallback');}\n//     connecting(){console.log('connecting');}\n//     connected(){console.log('connected');}\n//     upgrading(){console.log('upgrading');}\n//     upgraded(){console.log('upgraded');}\n//     disconnecting(){console.log('disconnecting');}\n//     disconnected(){console.log('disconnected');}\n// }\n// );\n\n// const e = document.createElement('x-test');\n// console.log(e.outerHTML);\n// document.body.append(e);\n", "import { replaceChildren  } from './poly';\n\ntype Module = { default: CustomElementConstructor }\ntype Handler = () => Module | CustomElementConstructor | Promise<CustomElementConstructor | Module>;\n\ntype Route = {\n    path: string;\n    instance: any;\n    handler: Handler;\n    container: Element;\n};\n\nconst alls: Array<Route> = [];\nconst routes: Array<Route> = [];\n\nconst notModule = function (module:any) {\n    return (!Object.keys(module).length) || (!!module.default && typeof module.default === 'object' && !Object.keys(module.default).length);\n};\n\nconst transition = async function (route: Route) {\n    if (route.instance) {\n        replaceChildren(route.container, route.instance);\n    } else {\n        const tag = 'x-' + (route.path.replace(/\\/+/g,'-').replace(/^-|-$|\\.*/g, '') || 'root');\n        const result = await route.handler() as any;\n        const constructor = notModule(result) ? result : result.default;\n        if (!customElements.get(tag)) {\n            customElements.define(tag, constructor);\n        }\n        route.instance = document.createElement(tag);\n        replaceChildren(route.container, route.instance);\n    }\n};\n\nconst navigate = function (event?: any) {\n    if (event && 'canIntercept' in event && event.canIntercept === false) return;\n    if (event && 'canTransition' in event && event.canTransition === false) return;\n\n    const destination = new URL(event?.destination.url ?? location.href);\n    const base = new URL(document.querySelector('base')?.href ?? location.origin);\n\n    base.hash = '';\n    base.search = '';\n    destination.hash = '';\n    destination.search = '';\n\n    const pathname = destination.href.replace(base.href, '/');\n    const transitions: Array<Route> = [];\n\n    for (const route of routes) {\n        if (route.path !== pathname) continue;\n        transitions.push(route);\n    }\n\n    for (const all of alls) {\n        let has = false;\n\n        for (const transition of transitions) {\n            if (transition.container === all.container) {\n                has = true;\n                break;\n            }\n        }\n\n        if (has) continue;\n\n        transitions.push(all);\n    }\n\n    if (event?.intercept) {\n        return event.intercept({ handler: () => transitions.map((route) => transition(route)) });\n    } else if (event?.transitionWhile) {\n        return event.transitionWhile(transitions.map((route) => transition(route)));\n    } else {\n        transitions.map((route) => transition(route));\n    }\n};\n\nconst router = function (path: string, container: Element, handler: Handler) {\n    if (!path) throw new Error('XElement - router path required');\n    if (!handler) throw new Error('XElement - router handler required');\n    if (!container) throw new Error('XElement - router container required');\n\n    if (path === '/*') {\n        for (const all of alls) {\n            if (all.path === path && all.container === container) {\n                throw new Error('XElement - router duplicate path on container');\n            }\n        }\n\n        alls.push({ path, container, handler, instance: undefined });\n    } else {\n        for (const route of routes) {\n            if (route.path === path && route.container === container) {\n                throw new Error('XElement - router duplicate path on container');\n            }\n        }\n\n        routes.push({ path, container, handler, instance: undefined });\n    }\n\n    Reflect.get(window, 'navigation').addEventListener('navigate', navigate);\n};\n\nexport default router;\n", "import Component from './component';\n// import Schedule from './schedule';\n// import Context from './context';\n// import Define from './define';\nimport Router from './router';\nimport Render from './render';\n// import Patch from './patch';\n// import Mount from './mount';\nimport html from './html';\n\nexport { Component };\nexport { Component as component };\n\n// export { Schedule };\n// export { Schedule as schedule };\n\n// export { Context };\n// export { Context as context };\n\n// export { Define };\n// export { Define as define };\n\nexport { Router };\nexport { Router as router };\n\nexport { Render };\nexport { Render as render };\n\n// export { Patch };\n// export { Patch as patch };\n\n// export { Mount };\n// export { Mount as mount };\n\nexport { html };\n\nconst Index = {\n    Component,\n    // Schedule,\n    // Context,\n    // Define,\n    Router,\n    Render,\n    // Patch,\n    // Mount,\n    component: Component,\n    // schedule: Schedule,\n    // context: Context,\n    // define: Define,\n    router: Router,\n    render: Render,\n    // patch: Patch,\n    // mount: Mount,\n    html\n};\n\nexport default Index;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACO,IAAM,kBAAkB,SAAU,YAAmD,OAAgC;AAExH,SAAO,QAAQ,WAAW;AACtB,YAAQ,YAAY,QAAQ,SAAS;AAAA,EAEzC;AAEA,MAAI,+BAAO,QAAQ;AACf,eAAW,QAAQ,OAAO;AACtB,cAAQ;AAAA,QACJ,OAAO,SAAS,WACf,QAAQ,cAA2B,eAAe,IAAI,IACvD;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAEJ;AAEO,IAAM,WAAW,SAAU,MAA2B,QAAa;AACtE,SAAO,KAAK,QAAQ,MAAM,MAAM;AACpC;AAEA,IAAM,SAAS,kBAAkB,SAAU,OAAe,aAAa,aAAa,aAAa,EAAE,YAAY,CAAC,SAAgB,KAAK,CAAC,IAAI;AACnI,IAAM,aAAa,SAAU,MAAc;AAC9C,MAAI,QAAQ;AACR,WAAO,OAAO,WAAW,IAAI;AAAA,EACjC,OAAO;AACH,WAAO;AAAA,EACX;AACJ;;;AC/Be,SAAR,QAAyB,MAAmB;AAC/C,UAAQ,OAAO,MAAM;AAAA,IACjB,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO,GAAG;AAAA,IACd,KAAK;AACD,aAAO,GAAG;AAAA,IACd,KAAK;AACD,aAAO,GAAG;AAAA,IACd,KAAK;AACD,aAAO,GAAG,KAAK;AAAA,IACnB,KAAK;AACD,aAAO,OAAO,IAAI;AAAA,IACtB,KAAK;AACD,aAAO,KAAK,UAAU,IAAI;AAAA,IAC9B;AACI,YAAM,IAAI,MAAM,4BAA4B;AAAA,EACpD;AACJ;;;ACrBA,IAAM,WAAW;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AAEA,IAAO,mBAAQ;;;AC3CR,IAAM,YAAY,oBAAI,QAAQ;AAC9B,IAAM,aAAa,OAAO,MAAM;AAexB,SAAR,KAAsB,YAAkC,aAAuC;AAClG,MAAI,UAAU,IAAI,OAAO,GAAG;AACxB,UAAM,WAAW,UAAU,IAAI,OAAO;AAEtC,WAAO,EAAE,SAAS,aAAa,QAAO,aAAa,UAAU,QAAQ,WAAW;AAAA,EACpF,OAAO;AACH,QAAI,OAAO;AAEX,UAAM,SAAS,QAAQ,SAAS;AAEhC,aAAS,QAAQ,GAAG,QAAQ,QAAQ,SAAS;AACzC,cAAQ,GAAG,QAAQ,KAAK,MAAM;AAAA,IAClC;AAEA,YAAQ,QAAQ,MAAM;AAEtB,UAAM,WAAW,SAAS,cAAc,UAAU;AAClD,aAAS,YAAY,WAAW,IAAI;AAIpC,cAAU,IAAI,SAAS,QAAQ;AAG/B,WAAO,EAAE,SAAS,aAAa,QAAO,aAAa,UAAU,QAAQ,WAAW;AAAA,EACpF;AACJ;;;AClCA,IAAM,QAAO,CAAE,OAAO,QAAQ,YAAa;AAC3C,IAAM,cAAc;AAEpB,IAAM,gBAAgB,SAAU,MAAc;AAC1C,SAAO,OAAO,SAAS,YAAY,CAAC,YAAY,KAAK,IAAI;AAC7D;AAEA,IAAM,eAAe,SAAU,OAAa,KAAW,SAAkB,UAAoB,UAAoB;AAlBjH;AAmBI,aAAW,8BAAY,CAAC;AACxB,aAAW,8BAAY,CAAC;AAExB,OAAI,qCAAU,aAAY,SAAS,SAAS;AACxC,QAAI;AACJ,QAAI,OAAO,IAAI;AACf,WAAO,SAAS,OAAO;AACnB,aAAO,6BAAM;AACb,yCAAM,eAAN,mBAAkB,YAAY;AAC9B,aAAO;AAAA,IACX;AAEA,UAAM,WAAW,SAAS,SAAS,QAAQ,UAAU,IAAI;AACzD,eAAW,UAAU,SAAS,QAAQ,OAAO;AAC7C,aAAS,UAAU,QAAQ;AAE3B,UAAM,IAAI,QAAQ;AAClB,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AACxB,cAAQ,CAAC,GAAE,cAAS,WAAT,mBAAkB,IAAI,SAAS,OAAO,CAAC,CAAC;AAAA,IACvD;AAEA,cAAI,eAAJ,mBAAgB,aAAa,UAAU;AAAA,EAC3C,OAAO;AACH,UAAM,IAAI,QAAQ;AAClB,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AACxB,cAAQ,CAAC,GAAE,cAAS,WAAT,mBAAkB,IAAI,SAAS,OAAO,CAAC,CAAC;AAAA,IACvD;AAAA,EACJ;AACJ;AAEA,IAAM,cAAc,SAAU,OAAa,KAAW,SAAkB,UAAoB,UAAoB;AAjDhH;AAkDI,aAAW,8BAAY,CAAC;AACxB,aAAW,8BAAY,CAAC;AAExB,QAAM,YAAY,SAAS;AAC3B,QAAM,YAAY,SAAS;AAC3B,QAAM,SAAS,KAAK,IAAI,WAAW,SAAS;AAE5C,WAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC7B,YAAQ,CAAC,EAAE,SAAS,CAAC,GAAG,SAAS,CAAC,CAAC;AAAA,EACvC;AAEA,MAAI,YAAY,WAAW;AACvB,UAAM,WAAW,SAAS,cAAc,UAAU;AAClD,aAAS,IAAI,WAAW,IAAI,WAAW,KAAK;AACxC,YAAI,cAAS,CAAC,MAAV,mBAAa,iBAAgB,YAAU,cAAS,CAAC,MAAV,mBAAa,YAAW,YAAY;AAC3E,cAAMA,SAAQ,SAAS,eAAe,EAAE;AACxC,cAAMC,OAAM,SAAS,eAAe,EAAE;AACtC,cAAM,SAAS,aAAa,KAAK,MAAMD,QAAOC,MAAK,CAAC,CAAC;AACrD,iBAAS,QAAQ,YAAYD,MAAK;AAClC,iBAAS,QAAQ,YAAYC,IAAG;AAChC,gBAAQ,KAAK,MAAM;AACnB,eAAO,SAAS,CAAC,GAAG,SAAS,CAAC,CAAC;AAAA,MACnC,OAAO;AACH,cAAM,OAAO,SAAS,eAAe,EAAE;AACvC,cAAM,SAAS,eAAe,KAAK,MAAM,IAAY;AACrD,iBAAS,QAAQ,YAAY,IAAI;AACjC,gBAAQ,KAAK,MAAM;AACnB,eAAO,SAAS,CAAC,GAAG,SAAS,CAAC,CAAC;AAAA,MACnC;AAAA,IACJ;AACA,cAAI,eAAJ,mBAAgB,aAAa,SAAS,SAAiB;AAAA,EAC3D,WAAW,YAAY,WAAW;AAC9B,aAAS,IAAI,YAAU,GAAG,IAAI,YAAU,GAAG,KAAK;AAC5C,YAAI,cAAS,CAAC,MAAV,mBAAa,iBAAgB,YAAU,cAAS,CAAC,MAAV,mBAAa,YAAW,YAAY;AAC3E,cAAM,EAAE,SAAS,IAAI,SAAS,CAAC;AAC/B,YAAI,UAAU,SAAS,QAAQ,WAAW,SAAS;AACnD,eAAO;AAAW,oBAAI,eAAJ,mBAAgB,YAAY,IAAI;AAAA,MACtD,OAAO;AACH,kBAAI,eAAJ,mBAAgB,YAAY,IAAI;AAAA,MACpC;AAAA,IACJ;AACA,YAAQ,SAAS;AAAA,EACrB;AACJ;AAEA,IAAM,iBAAiB,SAAU,MAAY,UAAoB,UAAoB;AACjF,MAAI,aAAa;AAAU;AAC3B,OAAK,cAAc;AACvB;AAEA,IAAM,cAAc,SAAU,SAAkB,WAA4C,UAAoB,UAAoB;AAChI,MAAI,aAAa;AAAU;AAC3B,MAAI,OAAO,aAAa;AAAY,YAAQ,oBAAoB,UAAU,KAAK,MAAM,CAAC,GAAG,QAAQ;AACjG,MAAI,OAAO,aAAa;AAAY,WAAO,QAAQ,KAAK,8BAA8B,UAAU,oBAAoB,uBAAuB;AAC3I,UAAQ,iBAAiB,UAAU,KAAK,MAAM,CAAC,GAAG,QAAQ;AAC9D;AAEA,IAAM,mBAAmB,SAAU,SAAkB,WAAyC,UAAoB,UAAoB;AAClI,MAAI,aAAa;AAAU;AAE3B,QAAM,QAAQ,WAAW,OAAO;AAChC,MAAI;AAAO,YAAQ,aAAa,UAAU,MAAM,EAAE;AAAA;AAC7C,YAAQ,gBAAgB,UAAU,IAAI;AAE3C,YAAU,QAAQ;AAClB,UAAQ,IAAI,SAAS,UAAU,MAAM,UAAU,KAAK;AACxD;AAEA,IAAM,iBAAiB,SAAU,SAAkB,WAA4C,UAAoB,UAAoB;AACnI,MAAI,aAAa;AAAU;AAC3B,QAAM,QAAQ,QAAQ,QAAQ;AAC9B,YAAU,QAAQ;AAClB,UAAQ,IAAI,SAAS,UAAU,MAAM,UAAU,KAAK;AACpD,UAAQ,aAAa,UAAU,MAAM,UAAU,KAAK;AACxD;AAEA,IAAM,gBAAgB,SAAU,SAAkB,WAA4C,UAAoB,UAAoB;AAClI,MAAI,aAAa;AAAU;AAE3B,MAAI,cAAc,QAAQ,GAAG;AACzB,YAAQ,gBAAgB,UAAU,IAAI;AACtC,YAAQ,KAAK,8BAA8B,UAAU,oBAAoB,uBAAuB;AAChG;AAAA,EACJ;AAEA,YAAU,QAAQ;AAClB,UAAQ,IAAI,SAAS,UAAU,MAAM,UAAU,KAAK;AACpD,UAAQ,aAAa,UAAU,MAAM,UAAU,KAAK;AACxD;AAEA,IAAM,oBAAoB,SAAU,SAAkB,WAA4C,UAAoB,UAAoB;AACtI,MAAI,aAAa;AAAU;AAC3B,YAAU,QAAQ;AAClB,UAAQ,IAAI,SAAS,UAAU,MAAM,UAAU,KAAK;AACpD,UAAQ,aAAa,UAAU,MAAM,UAAU,KAAK;AACxD;AAEA,IAAM,gBAAgB,SAAU,SAAkB,WAA4C,UAAoB,UAAoB;AAClI,MAAI,aAAa;AAAU;AAC3B,UAAQ,gBAAgB,QAAQ;AAEhC,QAAM,OAAO,qCAAU;AAEvB,MAAI,SAAS,SAAS;AAClB,cAAU,OAAO;AACjB,mBAAe,SAAS,WAAW,UAAU,OAAO,UAAU,KAAK;AAAA,EACvE,WAAW,KAAK,WAAW,IAAI,GAAG;AAC9B,YAAQ,KAAK,sCAAsC,uBAAuB;AAAA,EAC9E,WAAW,SAAS,OAAO,IAAI,GAAG;AAC9B,YAAQ,KAAK,sCAAsC,uBAAuB;AAAA,EAC9E,WAAW,SAAS,kBAAU,IAAI,GAAG;AACjC,cAAU,OAAO;AACjB,qBAAiB,SAAS,WAAW,UAAU,OAAO,UAAU,KAAK;AAAA,EACzE,OAAO;AACH,cAAU,OAAO;AACjB,sBAAkB,SAAS,WAAW,UAAU,OAAO,UAAU,KAAK;AAAA,EAC1E;AAUJ;AAEO,IAAM,aAAa,SAAU,UAA4B,QAAgB,SAAkB;AAlLlG;AAmLI,QAAM,SAAS,SAAS,iBAAiB,UAAU,GAAG,IAAI;AAE1D,SAAO,cAAc;AAErB,MAAI,QAAQ;AACZ,MAAI,OAAoB,SAAS;AAEjC,UAAQ,OAAO,OAAO,SAAS,OAAO,MAAM;AACxC,QAAI,KAAK,aAAa,KAAK,WAAW;AAElC,YAAM,SAAQ,gBAAK,cAAL,mBAAgB,QAAQ,UAAxB,YAAiC;AAE/C,UAAI,SAAS;AAAI;AAEjB,UAAI,SAAS,GAAG;AACZ,QAAC,KAAc,UAAU,KAAK;AAC9B,eAAO,OAAO,SAAS;AAAA,MAC3B;AAEA,YAAM,OAAM,gBAAK,cAAL,mBAAgB,QAAQ,UAAxB,YAAiC;AAE7C,UAAI,OAAO;AAAI;AAEf,UAAI,MAAM,OAAK,UAAK,cAAL,mBAAgB,SAAQ;AACnC,QAAC,KAAc,UAAU,MAAM,CAAC;AAAA,MACpC;AAEA,YAAM,WAAW,OAAO,OAAO;AAE/B,WAAI,qCAAU,iBAAgB,WAAU,qCAAU,YAAW,YAAY;AACrE,cAAMD,SAAQ,SAAS,eAAe,EAAE;AACxC,cAAMC,OAAM;AACZ,QAAAA,KAAI,YAAY;AAChB,cAAAA,KAAI,eAAJ,mBAAgB,aAAaD,QAAOC;AACpC,gBAAQ,KAAK,aAAa,KAAK,MAAMD,QAAeC,MAAa,CAAC,CAAC,CAAC;AAAA,MACxE,YAAW,qCAAU,iBAAgB,OAAO;AACxC,cAAMD,SAAQ,SAAS,eAAe,EAAE;AACxC,cAAMC,OAAM;AACZ,QAAAA,KAAI,YAAY;AAChB,cAAAA,KAAI,eAAJ,mBAAgB,aAAaD,QAAOC;AACpC,gBAAQ,KAAK,YAAY,KAAK,MAAMD,QAAeC,MAAa,CAAC,CAAC,CAAC;AAAA,MACvE,OAAO;AACH,QAAC,KAAc,cAAc;AAC7B,gBAAQ,KAAK,eAAe,KAAK,MAAM,IAAY,CAAC;AAAA,MACxD;AAAA,IACJ,WAAW,KAAK,aAAa,KAAK,cAAc;AAC5C,YAAM,QAAS,KAAiB,kBAAkB;AAClD,iBAAW,QAAQ,OAAO;AACtB,cAAM,SAAS,UAAiB,aAAa,IAAI,MAAlC,YAAuC;AACtD,cAAM,YAAY,EAAE,MAAM,MAAM;AAEhC,cAAM,cAAc,KAAK,SAAS,IAAI,KAAK,KAAK,SAAS,IAAI;AAC7D,cAAM,eAAe,MAAM,SAAS,IAAI,KAAK,MAAM,SAAS,IAAI;AAEhE,YAAI,aAAa;AACb;AACA,UAAC,KAAiB,gBAAgB,IAAI;AACtC,kBAAQ;AAAA,YACJ,cAAc,KAAK,MAAM,MAAiB,SAAS;AAAA,UACvD;AAAA,QACJ;AAEA,YAAI,cAAc;AACd;AACA,UAAC,KAAiB,gBAAgB,IAAI;AACtC,cAAI,SAAS,SAAS;AAClB,oBAAQ;AAAA,cACJ,eAAe,KAAK,MAAM,MAAiB,SAAS;AAAA,YACxD;AAAA,UACJ,WAAW,KAAK,WAAW,IAAI,GAAG;AAC9B,oBAAQ;AAAA,cACJ,YAAY,KAAK,MAAM,MAAiB,SAAS;AAAA,YACrD;AAAA,UACJ,WAAW,SAAS,OAAO,IAAI,GAAG;AAC9B,oBAAQ;AAAA,cACJ,cAAc,KAAK,MAAM,MAAiB,SAAS;AAAA,YACvD;AAAA,UACJ,WAAW,SAAS,kBAAU,IAAI,GAAG;AACjC,oBAAQ;AAAA,cACJ,iBAAiB,KAAK,MAAM,MAAiB,SAAS;AAAA,YAC1D;AAAA,UACJ,OAAO;AACH,oBAAQ;AAAA,cACJ,kBAAkB,KAAK,MAAM,MAAiB,SAAS;AAAA,YAC3D;AAAA,UACJ;AAAA,QACJ;AAEA,YAAI,CAAC,eAAe,CAAC,cAAc;AAC/B,cAAI,SAAS,OAAO,IAAI,GAAG;AACvB,gBAAI,cAAc,KAAK,GAAG;AACtB,cAAC,KAAiB,gBAAgB,IAAI;AACtC,sBAAQ,KAAK,8BAA8B,oBAAoB,oBAAoB;AAAA,YACvF;AAAA,UACJ,WAAW,KAAK,WAAW,IAAI,GAAG;AAC9B,YAAC,KAAiB,gBAAgB,IAAI;AACtC,oBAAQ,KAAK,8BAA8B,mBAAmB;AAAA,UAClE;AAAA,QACJ;AAAA,MAEJ;AAAA,IACJ,OAAO;AACH,cAAQ,KAAK,0BAA0B,KAAK,QAAQ;AAAA,IACxD;AAAA,EACJ;AACJ;AAEA,IAAO,iBAAQ;;;ACvRf,IAAM,eAAe,oBAAI,QAAQ;AACjC,IAAM,cAAc,QAAQ,QAAQ;AAEpC,IAAM,aAAa,SAAU,QAAuB,QAAuB,KAAiB,OAAqB,UAA2B;AACxI,MAAI,OAAO,QAAQ;AAAU,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAE5E,QAAM,OAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAE9C,MAAI,SAAS;AAAO,WAAO;AAC3B,MAAI,OAAO,MAAM,IAAI,KAAK,OAAO,MAAM,KAAK;AAAG,WAAO;AAEtD,MAAI,SAAS,KAAK,YAAY,SAAS,YAAY,KAAK,YAAY,SAAS,WAAW,KAAK,YAAY,SAAS,aAAa;AAC3H,UAAM,QAAQ,aAAa,IAAI,IAAI;AACnC,QAAI,UAAU;AAAO,aAAO;AAC5B,iBAAa,OAAO,IAAI;AAAA,EAC5B;AAEA,UAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAExC,cAAY,KAAK,MAAM;AAEvB,SAAO;AACX;AAEA,IAAM,aAAa,SAAU,QAAuB,QAAuB,KAAiB,UAAyC;AACjI,MAAI,OAAO,QAAQ;AAAU,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAErE,QAAM,QAAQ,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAE/C,MAAI,UAAU,MAAM,YAAY,SAAS,YAAY,MAAM,YAAY,SAAS,UAAU;AACtF,UAAM,QAAQ,aAAa,IAAI,KAAK;AACpC,QAAI;AAAO,aAAO;AAElB,UAAM,QAAQ,IAAI,MAAM,OAAO;AAAA,MAC3B,KAAK,WAAW,KAAK,MAAM,MAAM;AAAA,MACjC,KAAK,WAAW,KAAK,MAAM,MAAM;AAAA,MACjC,gBAAgB,cAAc,KAAK,MAAM,MAAM;AAAA,IACnD,CAAC;AAED,iBAAa,IAAI,OAAO,KAAK;AAC7B,WAAO;AAAA,EACX;AAEA,MAAI,SAAS,OAAO,YAAY,SAAS,aAAa,MAAM,YAAY,SAAS,cAAc,MAAM,YAAY,SAAS,kBAAkB;AACxI,UAAM,QAAQ,aAAa,IAAI,KAAK;AACpC,QAAI;AAAO,aAAO;AAElB,UAAM,QAAQ,IAAI,MAAM,OAAO;AAAA,MAC3B,MAAM,GAAG,GAAG,GAAG;AACX,eAAO,QAAQ,MAAM,GAAG,UAAU,CAAC;AAAA,MACvC;AAAA,IACJ,CAAC;AAED,iBAAa,IAAI,OAAO,KAAK;AAC7B,WAAO;AAAA,EACX;AAEA,SAAO;AACX;AAEA,IAAM,gBAAgB,SAAU,QAAuB,QAAuB,KAAiB;AAC3F,MAAI,OAAO,QAAQ;AAAU,WAAO,QAAQ,eAAe,QAAQ,GAAG;AAEtE,QAAM,OAAO,QAAQ,IAAI,QAAQ,GAAG;AACpC,eAAa,OAAO,IAAI;AACxB,UAAQ,eAAe,QAAQ,GAAG;AAElC,cAAY,KAAK,MAAM;AAEvB,SAAO;AACX;AAEA,IAAM,UAAU,SAAU,MAAmB,QAAuB;AAChE,SAAO,IAAI,MAAM,MAAM;AAAA,IACnB,KAAK,WAAW,KAAK,MAAM,MAAM;AAAA,IACjC,KAAK,WAAW,KAAK,MAAM,MAAM;AAAA,IACjC,gBAAgB,cAAc,KAAK,MAAM,MAAM;AAAA,EACnD,CAAC;AACL;AAEA,IAAO,kBAAQ;;;ACvFA,SAAR,KAAsB,MAAsB;AAC/C,SAAO,KAAK,QAAQ,sBAAsB,OAAO,EAAE,YAAY;AACnE;;;ACyCA,IAAM,aAAa,oBAAI,QAAQ;AAyB/B,IAAM,eAAe,IAAI,MAAM,SAAS;AACxC,IAAM,gBAAgB,IAAI,MAAM,UAAU;AAE1C,IAAM,gBAAgB,IAAI,MAAM,UAAU;AAC1C,IAAM,iBAAiB,IAAI,MAAM,WAAW;AAE5C,IAAM,iBAAiB,IAAI,MAAM,WAAW;AAC5C,IAAM,kBAAkB,IAAI,MAAM,YAAY;AAE9C,IAAM,kBAAkB,IAAI,MAAM,YAAY;AAC9C,IAAM,mBAAmB,IAAI,MAAM,aAAa;AAEhD,IAAM,oBAAoB,IAAI,MAAM,cAAc;AAClD,IAAM,qBAAqB,IAAI,MAAM,eAAe;AAEpD,IAAM,SAAS,WAA2C;AAAA;AAnF1D;AAoFI,UAAM,OAAM,UAAK,QAAL,YAAY,KAAK,KAAK,IAAI;AAEtC,QAAI,CAAC,eAAe,IAAI,GAAG,GAAG;AAC1B,qBAAe,OAAO,KAAK,IAAI;AAAA,IACnC;AAEA,UAAM,UAAU,SAAS,cAAc,GAAG;AAG1C,WAAO;AAAA,EACX;AAAA;AAEA,IAAM,SAAS,WAAqC;AAhGpD;AAiGI,QAAM,OAAM,UAAK,QAAL,YAAY,KAAK,KAAK,IAAI;AACtC,MAAI,CAAC,eAAe,IAAI,GAAG;AAAG;AAC9B,iBAAe,OAAO,KAAK,IAAI;AACnC;AAEA,IAAM,UAAU,WAA2C;AAAA;AAtG3D;AAuGI,UAAM,OAAM,UAAK,QAAL,YAAY,KAAK,KAAK,IAAI;AACtC,WAAO,eAAe,YAAY,GAAG;AAAA,EACzC;AAAA;AAEA,IAAM,UAAU,SAAgB,MAAwB;AAAA;AA3GxD;AA4GI,UAAM,WAAW,WAAW,IAAI,IAAI;AAEpC,QAAI,SAAS;AAAM;AAAA;AACd,eAAS,OAAO;AAGrB,SAAK,cAAc,cAAc;AACjC,WAAM,gBAAK,cAAL,qDAAoB,MAAM,QAAQ;AAExC,UAAM,SAAS,KAAK,SAAS;AAE7B,UAAM,UAAS,cAAS,QAAQ,WAAjB,YAA2B;AAC1C,aAAS,QAAQ,GAAG,QAAQ,QAAQ,SAAS;AACzC,eAAS,QAAQ,KAAK,EAAE,SAAS,YAAY,KAAK,GAAG,OAAO,YAAY,KAAK,CAAC;AAAA,IAClF;AAEA,aAAS,YAAY,OAAO,GAAG,IAAI,GAAG,OAAO,WAAW;AAExD,aAAS,OAAO;AAEhB,WAAM,gBAAK,aAAL,qDAAmB,MAAM,QAAQ;AACvC,SAAK,cAAc,aAAa;AAAA,EACpC;AAAA;AAEA,IAAM,QAAQ,SAAgB,MAAwB;AAAA;AApItD;AAqII,UAAM,WAAW,WAAW,IAAI,IAAI;AAEpC,QAAI,SAAS;AAAS;AAAA;AACjB,eAAS,UAAU;AAExB,SAAK,cAAc,cAAc;AACjC,WAAM,gBAAK,cAAL,qDAAoB,MAAM,QAAQ;AAExC,UAAM,SAAS,KAAK,SAAS;AAE7B,aAAS,YAAY,OAAO,GAAG,IAAI,GAAG,OAAO,MAAM;AACnD,aAAS,WAAW,OAAO,SAAS,QAAQ,UAAU,IAAI;AAE1D,mBAAO,SAAS,UAAU,SAAS,aAAa,SAAS,OAAO;AAEhE,aAAS,UAAU,SAAS,QAAQ;AAEpC,UAAM,SAAS,SAAS,QAAQ;AAChC,aAAS,QAAQ,GAAG,QAAQ,QAAQ,SAAS;AACzC,eAAS,QAAQ,KAAK,EAAE,QAAW,SAAS,YAAY,KAAK,CAAC;AAAA,IAClE;AAEA,oBAAgB,SAAS,MAAM,SAAS,QAAQ;AAEhD,WAAM,gBAAK,aAAL,qDAAmB,MAAM,QAAQ;AACvC,SAAK,cAAc,aAAa;AAAA,EACpC;AAAA;AAYA,IAAM,YAAY,SAAU,GAAO,GAAO,GAAO;AA3KjD;AA4KI,QAAM,OAAO,QAAQ,UAAU,GAAG,GAAG,CAAC;AACtC,QAAM,cAAc,KAAK;AAEzB,QAAM,SAAS,YAAY;AAC3B,QAAM,OAAM,iBAAY,QAAZ,YAAmB,KAAK,YAAY,IAAI;AACpD,QAAM,qBAAqB,YAAY;AACvC,QAAM,YAAY,OAAO,eAAe,IAAI;AAE5C,QAAM,WAAe;AAAA,IACjB;AAAA,IACA,SAAS,CAAC;AAAA,IACV,MAAM;AAAA,IACN,SAAS,CAAC;AAAA,IACV,SAAS;AAAA,IACT,aAAa,CAAC;AAAA,IACd,UAAU;AAAA,IACV,QAAQ,UAAU;AAAA,IAClB,MAAM,UAAU,UAAK,eAAL,YAAmB,KAAK,aAAa,EAAE,MAAM,OAAO,CAAC,IAAI;AAAA,EAC7E;AAEA,WAAS,WAAW,gBAAQ,SAAS,SAAS,MAAK,QAAQ,IAAI,CAAC,GAEhE,WAAW,IAAI,MAAM,QAAQ;AAE7B,QAAM,aAAa,qBACf,kDAAsB,CAAC,IACvB;AAAA,IAAE,GAAG,OAAO,oBAAoB,IAAI;AAAA,IAChC,GAAG,OAAO,oBAAoB,SAAS;AAAA,EAAE;AAEjD,aAAW,YAAY,YAAY;AAE/B,QACI,+BAA+B,YAC/B,kBAAkB,YAClB,iBAAiB,YAEjB,sBAAsB,YACtB,eAAe,YACf,cAAc,YAEd,2BAA2B,YAC3B,oBAAoB,YACpB,mBAAmB,YAEnB,wBAAwB,YACxB,iBAAiB,YACjB,gBAAgB,YAEhB,uBAAuB,YACvB,gBAAgB,YAChB,eAAe,YAEf,kBAAkB,YAClB,eAAe;AAEjB;AAEF,UAAM,cAAa,YAAO,yBAAyB,MAAM,QAAQ,MAA9C,YAAmD,OAAO,yBAAyB,WAAW,QAAQ;AAEzH,QAAI,CAAC;AAAY;AACjB,QAAI,CAAC,WAAW;AAAc;AAE9B,WAAO,eAAe,SAAS,SAAS,UAAU,iCAAK,aAAL,EAAiB,YAAY,MAAM,EAAC;AAEtF,WAAO,eAAe,MAAM,UAAU;AAAA,MAClC,YAAY,WAAW;AAAA,MACvB,cAAc,WAAW;AAAA,MACzB,MAAM;AACF,eAAO,SAAS,SAAS,QAAQ;AAAA,MACrC;AAAA,MACA,IAAI,OAAO;AACP,iBAAS,SAAS,QAAQ,IAAI;AAAA,MAElC;AAAA,IACJ,CAAC;AAAA,EAEL;AAOA,SAAO;AACX;AAEe,SAAR,UAA4B,OAAiD;AAlQpF;AAmQI,QAAM,SAAS;AACf,QAAM,SAAS;AACf,QAAM,UAAU;AAEhB,QAAM,OAAM,WAAM,QAAN,YAAa,KAAK,MAAM,IAAI;AACxC,QAAM,mBAAmB,MAAM,UAAU;AACzC,QAAM,oBAAoB,MAAM,UAAU;AAC1C,QAAM,uBAAuB,MAAM,UAAU;AAE7C,QAAM,UAAU,mBAAmB,WAAkB;AAAA;AA5QzD,UAAAC,KAAA;AA6QQ,WAAK,cAAc,cAAc;AACjC,aAAMA,MAAA,KAAK,cAAL,gBAAAA,IAAA;AACN,aAAM,UAAK,aAAL;AACN,WAAK,cAAc,aAAa;AAChC,YAAM;AAAA,IACV;AAAA;AAEA,QAAM,UAAU,oBAAoB,WAAkB;AAAA;AApR1D,UAAAA,KAAA;AAqRQ,WAAK,cAAc,eAAe;AAClC,aAAMA,MAAA,KAAK,eAAL,gBAAAA,IAAA;AACN,YAAM,MAAM,IAAI;AAChB,aAAM,UAAK,cAAL;AACN,WAAK,cAAc,cAAc;AACjC,YAAM;AAAA,IACV;AAAA;AAEA,QAAM,UAAU,uBAAuB,WAAkB;AAAA;AA7R7D,UAAAA,KAAA;AA8RQ,WAAK,cAAc,kBAAkB;AACrC,aAAMA,MAAA,KAAK,kBAAL,gBAAAA,IAAA;AACN,aAAM,UAAK,iBAAL;AACN,WAAK,cAAc,iBAAiB;AACpC,YAAM;AAAA,IACV;AAAA;AAEA,QAAM,OAAO,IAAI,MAAM,OAAO,EAAE,UAAU,CAAC;AAG3C,MAAI,OAAO,CAAC,eAAe,IAAI,GAAG,GAAG;AACjC,mBAAe,OAAO,KAAK,IAAW;AAAA,EAC1C;AAEA,SAAO;AACX;;;ACjSA,IAAM,OAAqB,CAAC;AAC5B,IAAM,SAAuB,CAAC;AAE9B,IAAM,YAAY,SAAU,QAAY;AACpC,SAAQ,CAAC,OAAO,KAAK,MAAM,EAAE,UAAY,CAAC,CAAC,OAAO,WAAW,OAAO,OAAO,YAAY,YAAY,CAAC,OAAO,KAAK,OAAO,OAAO,EAAE;AACpI;AAEA,IAAM,aAAa,SAAgB,OAAc;AAAA;AAC7C,QAAI,MAAM,UAAU;AAChB,sBAAgB,MAAM,WAAW,MAAM,QAAQ;AAAA,IACnD,OAAO;AACH,YAAM,MAAM,QAAQ,MAAM,KAAK,QAAQ,QAAO,GAAG,EAAE,QAAQ,cAAc,EAAE,KAAK;AAChF,YAAM,SAAS,MAAM,MAAM,QAAQ;AACnC,YAAM,cAAc,UAAU,MAAM,IAAI,SAAS,OAAO;AACxD,UAAI,CAAC,eAAe,IAAI,GAAG,GAAG;AAC1B,uBAAe,OAAO,KAAK,WAAW;AAAA,MAC1C;AACA,YAAM,WAAW,SAAS,cAAc,GAAG;AAC3C,sBAAgB,MAAM,WAAW,MAAM,QAAQ;AAAA,IACnD;AAAA,EACJ;AAAA;AAEA,IAAM,WAAW,SAAU,OAAa;AAlCxC;AAmCI,MAAI,SAAS,kBAAkB,SAAS,MAAM,iBAAiB;AAAO;AACtE,MAAI,SAAS,mBAAmB,SAAS,MAAM,kBAAkB;AAAO;AAExE,QAAM,cAAc,IAAI,KAAI,oCAAO,YAAY,QAAnB,YAA0B,SAAS,IAAI;AACnE,QAAM,OAAO,IAAI,KAAI,oBAAS,cAAc,MAAM,MAA7B,mBAAgC,SAAhC,YAAwC,SAAS,MAAM;AAE5E,OAAK,OAAO;AACZ,OAAK,SAAS;AACd,cAAY,OAAO;AACnB,cAAY,SAAS;AAErB,QAAM,WAAW,YAAY,KAAK,QAAQ,KAAK,MAAM,GAAG;AACxD,QAAM,cAA4B,CAAC;AAEnC,aAAW,SAAS,QAAQ;AACxB,QAAI,MAAM,SAAS;AAAU;AAC7B,gBAAY,KAAK,KAAK;AAAA,EAC1B;AAEA,aAAW,OAAO,MAAM;AACpB,QAAI,MAAM;AAEV,eAAWC,eAAc,aAAa;AAClC,UAAIA,YAAW,cAAc,IAAI,WAAW;AACxC,cAAM;AACN;AAAA,MACJ;AAAA,IACJ;AAEA,QAAI;AAAK;AAET,gBAAY,KAAK,GAAG;AAAA,EACxB;AAEA,MAAI,+BAAO,WAAW;AAClB,WAAO,MAAM,UAAU,EAAE,SAAS,MAAM,YAAY,IAAI,CAAC,UAAU,WAAW,KAAK,CAAC,EAAE,CAAC;AAAA,EAC3F,WAAW,+BAAO,iBAAiB;AAC/B,WAAO,MAAM,gBAAgB,YAAY,IAAI,CAAC,UAAU,WAAW,KAAK,CAAC,CAAC;AAAA,EAC9E,OAAO;AACH,gBAAY,IAAI,CAAC,UAAU,WAAW,KAAK,CAAC;AAAA,EAChD;AACJ;AAEA,IAAM,SAAS,SAAU,MAAc,WAAoB,SAAkB;AACzE,MAAI,CAAC;AAAM,UAAM,IAAI,MAAM,iCAAiC;AAC5D,MAAI,CAAC;AAAS,UAAM,IAAI,MAAM,oCAAoC;AAClE,MAAI,CAAC;AAAW,UAAM,IAAI,MAAM,sCAAsC;AAEtE,MAAI,SAAS,MAAM;AACf,eAAW,OAAO,MAAM;AACpB,UAAI,IAAI,SAAS,QAAQ,IAAI,cAAc,WAAW;AAClD,cAAM,IAAI,MAAM,+CAA+C;AAAA,MACnE;AAAA,IACJ;AAEA,SAAK,KAAK,EAAE,MAAM,WAAW,SAAS,UAAU,OAAU,CAAC;AAAA,EAC/D,OAAO;AACH,eAAW,SAAS,QAAQ;AACxB,UAAI,MAAM,SAAS,QAAQ,MAAM,cAAc,WAAW;AACtD,cAAM,IAAI,MAAM,+CAA+C;AAAA,MACnE;AAAA,IACJ;AAEA,WAAO,KAAK,EAAE,MAAM,WAAW,SAAS,UAAU,OAAU,CAAC;AAAA,EACjE;AAEA,UAAQ,IAAI,QAAQ,YAAY,EAAE,iBAAiB,YAAY,QAAQ;AAC3E;AAEA,IAAO,iBAAQ;;;ACpEf,IAAM,QAAQ;AAAA,EACV;AAAA;AAAA;AAAA;AAAA,EAIA;AAAA,EACA;AAAA;AAAA;AAAA,EAGA;AAAA;AAAA;AAAA;AAAA,EAIA,QAAQ;AAAA,EACR,QAAQ;AAAA;AAAA;AAAA,EAGR;AACJ;AAEA,IAAO,cAAQ;",
  "names": ["start", "end", "_a", "transition"]
}
