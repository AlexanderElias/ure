/**
 * @version 9.0.1
 *
 * @license
 * Copyright (C) Alexander Elias
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @module
 */

var Ne=Object.defineProperty;var Te=(e,t,n)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var A=(e,t,n)=>(Te(e,typeof t!="symbol"?t+"":t,n),n),Q=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var u=(e,t,n)=>(Q(e,t,"read from private field"),n?n.call(e):t.get(e)),C=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},v=(e,t,n,o)=>(Q(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);var x=(e,t,n)=>new Promise((o,s)=>{var i=a=>{try{l(n.next(a))}catch(r){s(r)}},c=a=>{try{l(n.throw(a))}catch(r){s(r)}},l=a=>a.done?o(a.value):Promise.resolve(a.value).then(i,c);l((n=n.apply(e,t)).next())});function L(e,t){customElements.get(e)||customElements.define(e,t)}function P(e){switch(`${e}`){case"NaN":return"";case"null":return"";case"undefined":return""}switch(typeof e){case"string":return e;case"number":return`${e}`;case"bigint":return`${e}`;case"boolean":return`${e}`;case"function":return`${e()}`;case"symbol":return String(e);case"object":return JSON.stringify(e)}throw new Error("XElement - display type not handled")}var ee=()=>Math.floor(Math.random()*Date.now());var _=function(e,...t){for(;e.lastChild;)e.removeChild(e.lastChild);if(t!=null&&t.length)for(let n of t)e.appendChild(typeof n=="string"?e.ownerDocument.createTextNode(n):n)},F=function(e,t){return e.indexOf(t)!==-1},te="trustedTypes"in window?window.trustedTypes.createPolicy("x-element",{createHTML:e=>e}):void 0,ne=function(e){return te?te.createHTML(e):e};var H=Symbol("html"),oe=new WeakMap;function X(e,...t){let n=oe.get(e);if(n){let[o,s]=n;return{strings:e,template:o,expressions:t,symbol:H,marker:s}}else{let o=`X-${ee()}-X`,s="",i=e.length-1;for(let l=0;l<i;l++)s+=`${e[l]}${o}`;s+=e[i];let c=document.createElement("template");return c.innerHTML=ne(s),oe.set(e,[c,o]),{strings:e,template:c,expressions:t,symbol:H,marker:o}}}var Re=NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,ie=["src","href","data","action","srcdoc","xlink:href","cite","formaction","ping","poster","background","classid","codebase","longdesc","profile","usemap","icon","manifest","archive"],Ae=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i,se=function(e){return e===""||typeof e!="string"?!1:!Ae.test(e)},Se=function(e,t){var o;let n=t.previousSibling;for(;n!==e;)(o=n==null?void 0:n.parentNode)==null||o.removeChild(n),n=t.previousSibling},re=function(e,t){var n,o,s,i,c,l,a,r,d,g,E,R,p;if((t==null?void 0:t.symbol)===H)if(e=e!=null?e:{},t=t!=null?t:{},e.strings===t.strings){let h=this.actions.length;for(let m=0;m<h;m++)this.actions[m](e.expressions[m],t.expressions[m])}else{this.actions.length=0;let h=t.template.content.cloneNode(!0);ae(h,this.actions,t.marker);let m=this.actions.length;for(let w=0;w<m;w++)this.actions[w]((n=e.expressions)==null?void 0:n[w],t.expressions[w]);document.adoptNode(h),Se(this.start,this.end),(o=this.end.parentNode)==null||o.insertBefore(h,this.end)}else if((t==null?void 0:t.constructor)===Array){e=e!=null?e:[],t=t!=null?t:[];let h=e.length,m=t.length,w=Math.min(h,m);for(let f=0;f<w;f++)this.actions[f](e[f],t[f]);if(h<m){let f=document.createElement("template");for(let M=h;M<m;M++){let V=document.createTextNode(""),J=document.createTextNode(""),Y=re.bind({start:V,end:J,actions:[]});f.content.appendChild(V),f.content.appendChild(J),this.actions.push(Y),Y(e[M],t[M])}(s=this.end.parentNode)==null||s.insertBefore(f.content,this.end)}else if(h>m){for(let f=h-1;f>m-1;f--)if(((i=e[f])==null?void 0:i.symbol)===H){let{template:M}=e[f],V=M.content.childNodes.length+2;for(;V--;)(c=this.end.parentNode)==null||c.removeChild(this.end.previousSibling)}else(l=this.end.parentNode)==null||l.removeChild(this.end.previousSibling),(a=this.end.parentNode)==null||a.removeChild(this.end.previousSibling),(r=this.end.parentNode)==null||r.removeChild(this.end.previousSibling);this.actions.length=m}}else{if(e===t)return;if(typeof e!=typeof t)for(;this.end.previousSibling!==this.start;)(d=this.end.parentNode)==null||d.removeChild(this.end.previousSibling);let h;this.end.previousSibling===this.start?(h=document.createTextNode(P(t)),(g=this.end.parentNode)==null||g.insertBefore(h,this.end)):((E=this.end.previousSibling)==null?void 0:E.nodeType)===Node.TEXT_NODE?(h=this.end.previousSibling,h.textContent=P(t)):(h=document.createTextNode(P(t)),(R=this.end.parentNode)==null||R.removeChild(this.end.previousSibling),(p=this.end.parentNode)==null||p.insertBefore(h,this.end))}},Me=function(e,t){e!==t&&(e!=null&&e.startsWith("on")&&typeof this.value=="function"&&this.element.removeEventListener(e.slice(2),this.value),Reflect.set(this.element,e,void 0),this.element.removeAttribute(e),this.name=t==null?void 0:t.toLowerCase(),this.name&&(this.element.setAttribute(this.name,""),Reflect.set(this.element,this.name,!0)))},Le=function(e,t){if(e!==t)if(this.name==="value"){if(this.value=P(t),!this.name)return;Reflect.set(this.element,this.name,this.value),this.element.setAttribute(this.name,this.value)}else if(this.name.startsWith("on")){if(!this.name)return;if(typeof this.value=="function"&&this.element.removeEventListener(this.name.slice(2),this.value,!0),this.value=t,typeof this.value!="function")return console.warn(`XElement - attribute name "${this.name}" and value "${this.value}" not allowed`);this.element.addEventListener(this.name.slice(2),this.value,!0)}else if(F(ie,this.name)){if(this.value=encodeURI(t),!this.name)return;if(se(this.value)){this.element.removeAttribute(this.name),console.warn(`XElement - attribute name "${this.name}" and value "${this.value}" not allowed`);return}Reflect.set(this.element,this.name,this.value),this.element.setAttribute(this.name,this.value)}else{if(this.value=t,!this.name)return;Reflect.set(this.element,this.name,this.value),this.element.setAttribute(this.name,this.value)}},Pe=function(e,t){var o,s,i,c;if(e===t)return;let n=this.element;if(t){(o=n.parentNode)==null||o.removeChild(n);let l=document.createElement(t);for(;n.firstChild;)l.appendChild(n.firstChild);if(n.nodeType===Node.ELEMENT_NODE){let a=n.getAttributeNames();for(let r of a){let d=(s=n.getAttribute(r))!=null?s:"";l.setAttribute(r,d)}}(i=this.holder.parentNode)==null||i.insertBefore(l,this.holder),this.element=l}else(c=n.parentNode)==null||c.removeChild(n),this.element=n},ae=function(e,t,n){var c,l,a,r,d,g;let o=new WeakSet,s=document.createTreeWalker(document,Re,null);s.currentNode=e;let i=e.firstChild;for(;i=s.nextNode();)if(o.has(i.previousSibling)&&(o.delete(i.previousSibling),t.push(()=>{})),i.nodeType===Node.TEXT_NODE){let E=(l=(c=i.nodeValue)==null?void 0:c.indexOf(n))!=null?l:-1;if(E===-1)continue;E!==0&&(i.splitText(E),i=s.nextNode());let R=n.length;R!==((a=i.nodeValue)==null?void 0:a.length)&&i.splitText(R);let p=document.createTextNode(""),h=i;h.textContent="",(r=h.parentNode)==null||r.insertBefore(p,h),t.push(re.bind({marker:n,start:p,end:h,actions:[]}))}else if(i.nodeType===Node.ELEMENT_NODE){(i.nodeName==="SCRIPT"||i.nodeName==="STYLE")&&s.nextSibling();let E={element:i};i.nodeName===n&&(o.add(i),E.holder=document.createTextNode(""),(d=i.parentNode)==null||d.insertBefore(E.holder,i),t.push(Pe.bind(E)));let R=i.getAttributeNames();for(let p of R){let h=(g=i.getAttribute(p))!=null?g:"",m=p.toUpperCase().includes(n),w=h.includes(n);if(m||w){let f={name:p,value:h,previous:void 0,get element(){return E.element}};m&&(i.removeAttribute(p),t.push(Me.bind(f))),w&&(i.removeAttribute(p),t.push(Le.bind(f)))}else F(ie,p)?se(h)&&(i.removeAttribute(p),console.warn(`XElement - attribute name "${p}" and value "${h}" not allowed`)):p.startsWith("on")&&(i.removeAttribute(p),console.warn(`XElement - attribute name "${p}" not allowed`))}}else console.warn(`XElement - node type "${i.nodeType}" not handled`)},ce=ae;var le=function(e,t,n,o,s){if(typeof n=="symbol")return Reflect.set(t,n,o,s);let i=Reflect.get(t,n,s);return i===o||Number.isNaN(i)&&Number.isNaN(o)||(Reflect.set(t,n,o,s),e()),!0},de=function(e,t,n,o){if(typeof n=="symbol")return Reflect.get(t,n,o);let s=Reflect.get(t,n,o);if(s){if(s.constructor===Function)return new Proxy(s,{apply(i,c,l){return Reflect.apply(i,o,l)}});if(s.constructor===Object||s.constructor===Array)return new Proxy(s,{get:de.bind(null,e),set:le.bind(null,e),deleteProperty:he.bind(null,e)})}return s},he=function(e,t,n){return typeof n=="symbol"?Reflect.deleteProperty(t,n):(Reflect.deleteProperty(t,n),e(),!0)},Oe=function(e,t){return new Proxy(e,{get:de.bind(null,t),set:le.bind(null,t),deleteProperty:he.bind(null,t)})},ue=Oe;function O(e){return e=e.replace(/([a-zA-Z])([A-Z])/g,"$1-$2"),e=e.toLowerCase(),e=e.includes("-")?e:`x-${e}`,e}var pe=new Event("adopted"),me=new Event("adopting"),Ge=new Event("upgraded"),Je=new Event("upgrading"),fe=new Event("creating"),ye=new Event("created"),Ee=new Event("rendering"),ve=new Event("rendered"),I=new Event("connected"),q=new Event("connecting"),be=new Event("attributed"),xe=new Event("attributing"),we=new Event("disconnected"),ge=new Event("disconnecting");var D=Symbol("Task"),U=Symbol("Create"),Ce=Symbol("Setup"),B=Symbol("Update"),y,k,j,N,$,T,S,W,$e,b=class extends HTMLElement{constructor(){var s;super();C(this,y,{});C(this,k,void 0);C(this,j,"");C(this,N,[]);C(this,$,[]);C(this,T,!1);C(this,S,!1);C(this,W,!1);A(this,$e,Promise.resolve());let n=this.constructor;if(n.shadow&&!this.shadowRoot){let i=n.mode||"open";this.attachShadow({mode:i})}v(this,k,(s=this.shadowRoot)!=null?s:this)}static define(n=(o=>(o=this.tag)!=null?o:this.name)()){return n=O(n),L(n,this),this}static create(){return x(this,arguments,function*(n=(o=>(o=this.tag)!=null?o:this.name)()){n=O(n),L(n,this);let s=document.createElement(n);return yield s[U],s})}attributeChangedCallback(n,o,s){return x(this,null,function*(){var i,c;this.dispatchEvent(xe),yield(c=(i=this.attribute)==null?void 0:i.call(this,n,o,s))==null?void 0:c.catch(console.error),this.dispatchEvent(be)})}adoptedCallback(){return x(this,null,function*(){var n,o;this.dispatchEvent(me),yield(o=(n=this.adopted)==null?void 0:n.call(this,u(this,y)))==null?void 0:o.catch(console.error),this.dispatchEvent(pe)})}connectedCallback(){return x(this,null,function*(){var n,o;u(this,W)?(this.dispatchEvent(q),yield(o=(n=this.connected)==null?void 0:n.call(this,u(this,y)))==null?void 0:o.catch(console.error),this.dispatchEvent(I)):yield this[U]()})}disconnectedCallback(){return x(this,null,function*(){var n,o;this.dispatchEvent(ge),yield(o=(n=this.disconnected)==null?void 0:n.call(this,u(this,y)))==null?void 0:o.catch(console.error),this.dispatchEvent(we)})}[($e=D,U)](){return x(this,null,function*(){var n,o,s;v(this,W,!0),v(this,T,!0),yield this[Ce](),this.dispatchEvent(fe),yield(n=this.created)==null?void 0:n.call(this,u(this,y)),this.dispatchEvent(ye),this.dispatchEvent(q),yield(s=(o=this.connected)==null?void 0:o.call(this,u(this,y)))==null?void 0:s.catch(console.error),this.dispatchEvent(I),v(this,T,!1),v(this,S,!1),yield this[B]()})}[B](){return x(this,null,function*(){return u(this,T)?(v(this,S,!0),this[D]):(v(this,T,!0),this[D]=this[D].then(()=>x(this,null,function*(){var o,s;this.dispatchEvent(Ee);let n=yield(o=this.render)==null?void 0:o.call(this,u(this,y));if(n)for(let i=0;i<u(this,N).length;i++){if(u(this,S)){yield Promise.resolve().then().catch(console.error),i=-1,v(this,S,!1);continue}let c=n.expressions[i],l=u(this,$)[i];try{u(this,N)[i](l,c)}catch(a){console.error(a)}u(this,$)[i]=n.expressions[i]}v(this,T,!1),yield(s=this.rendered)==null?void 0:s.call(this,u(this,y)),this.dispatchEvent(ve)})).catch(console.error),this[D])})}[Ce](){return x(this,null,function*(){var l,a;let o=this.constructor.observedProperties,s=Object.getPrototypeOf(this),i=o?o!=null?o:[]:[...Object.getOwnPropertyNames(this),...Object.getOwnPropertyNames(s)];for(let r of i){if(r==="attributeChangedCallback"||r==="disconnectedCallback"||r==="connectedCallback"||r==="adoptedCallback"||r==="constructor"||r==="disconnected"||r==="attribute"||r==="connected"||r==="rendered"||r==="created"||r==="adopted"||r==="render"||r==="setup")continue;let d=(l=Object.getOwnPropertyDescriptor(this,r))!=null?l:Object.getOwnPropertyDescriptor(s,r);d&&d.configurable&&(typeof d.value=="function"&&(d.value=d.value.bind(this)),typeof d.get=="function"&&(d.get=d.get.bind(this)),typeof d.set=="function"&&(d.set=d.set.bind(this)),Object.defineProperty(u(this,y),r,d),Object.defineProperty(this,r,{enumerable:d.enumerable,configurable:!1,get(){return u(this,y)[r]},set(g){u(this,y)[r]=g,this[B]()}}))}v(this,y,ue(u(this,y),this[B].bind(this)));let c=yield(a=this.render)==null?void 0:a.call(this,u(this,y));if(c){let r=c.template.content.cloneNode(!0);v(this,j,c.marker),v(this,$,c.expressions),ce(r,u(this,N),u(this,j));for(let d=0;d<u(this,N).length;d++){let g=c.expressions[d];try{u(this,N)[d](void 0,g)}catch(E){console.error(E)}}document.adoptNode(r),u(this,k).appendChild(r)}})}};y=new WeakMap,k=new WeakMap,j=new WeakMap,N=new WeakMap,$=new WeakMap,T=new WeakMap,S=new WeakMap,W=new WeakMap,A(b,"html",X),A(b,"tag"),A(b,"shadow"),A(b,"mode"),A(b,"observedProperties");var z=[],Z=[],K=function(e){return x(this,null,function*(){var t,n;if(e.instance)_(e.root,e.instance);else{let o=yield e.handler();if((o==null?void 0:o.prototype)instanceof HTMLElement)e.construct=o;else if(((t=o==null?void 0:o.default)==null?void 0:t.prototype)instanceof HTMLElement)e.construct=o.default;else throw new Error("XElement - router handler requires a CustomElementConstructor");e.construct.prototype instanceof b?e.instance=yield e.construct.create():(e.tag=O((n=e.construct.tag)!=null?n:e.construct.name),L(e.tag,e.construct),e.instance=document.createElement(e.tag)),_(e.root,e.instance)}})},He=function(e){var i,c,l;if(e&&"canIntercept"in e&&e.canIntercept===!1||e&&"canTransition"in e&&e.canTransition===!1)return;let t=new URL((i=e==null?void 0:e.destination.url)!=null?i:location.href),n=new URL((l=(c=document.querySelector("base"))==null?void 0:c.href)!=null?l:location.origin);n.hash="",n.search="",t.hash="",t.search="";let o=t.href.replace(n.href,"/"),s=[];for(let a of Z)a.path===o&&s.push(a);for(let a of z){let r=!1;for(let d of s)if(d.root===a.root){r=!0;break}r||s.push(a)}if(e!=null&&e.intercept)return e.intercept({handler:()=>s.map(a=>K(a))});if(e!=null&&e.transitionWhile)return e.transitionWhile(s.map(a=>K(a)));s.map(a=>K(a))},Xe=function(e,t,n){if(!e)throw new Error("XElement - router path required");if(!n)throw new Error("XElement - router handler required");if(!t)throw new Error("XElement - router root required");if(e==="/*"){for(let o of z)if(o.path===e&&o.root===t)throw new Error("XElement - router duplicate path on root");z.push({path:e,root:t,handler:n})}else{for(let o of Z)if(o.path===e&&o.root===t)throw new Error("XElement - router duplicate path on root");Z.push({path:e,root:t,handler:n,instance:void 0})}Reflect.get(window,"navigation").addEventListener("navigate",He)},G=Xe;var yt={Component:b,component:b,Router:G,router:G,html:X};export{b as Component,G as Router,b as component,yt as default,X as html,G as router};
//# sourceMappingURL=es2015.min.js.map
