/**
 * @version 9.1.9
 *
 * @license
 * Copyright (C) Alexander Elias
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @module
 */

var re=["src","href","data","action","srcdoc","xlink:href","cite","formaction","ping","poster","background","classid","codebase","longdesc","profile","usemap","icon","manifest","archive"],ae=["hidden","allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],E=function(e){return e&&typeof e=="string"?re.indexOf(e)!==-1:!1},g=function(e){return e&&typeof e=="string"?ae.indexOf(e)!==-1:!1},ce=/^value$/i,w=function(e){return e&&typeof e=="string"?ce.test(e):!1},le=/^on/i,m=function(e){return e&&typeof e=="string"?le.test(e):!1},x=function(e){return e&&typeof e=="string"?e?.toLowerCase()?.slice(2):""},H=function(e,t){return e&&typeof e=="string"?e.toLowerCase()===t.toLowerCase():!1},f=function(e,t){return e&&typeof e=="string"?e.toLowerCase().indexOf(t.toLowerCase())!==-1:!1};var de=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i,C=function(e){return e===""||typeof e!="string"?!1:!de.test(e)},N=function(e,t){let n=t.previousSibling;for(;n!==e;)n?.parentNode?.removeChild(n),n=t.previousSibling};function u(e){switch(`${e}`){case"NaN":return"";case"null":return"";case"undefined":return""}switch(typeof e){case"string":return e;case"number":return`${e}`;case"bigint":return`${e}`;case"boolean":return`${e}`;case"function":return`${e()}`;case"symbol":return String(e);case"object":return JSON.stringify(e)}throw new Error("XElement - display type not handled")}var D=()=>Math.floor(Math.random()*Date.now());var T=function(e,...t){for(;e.lastChild;)e.removeChild(e.lastChild);if(t?.length)for(let n of t)e.appendChild(typeof n=="string"?e.ownerDocument.createTextNode(n):n)},X="trustedTypes"in window?window.trustedTypes.createPolicy("x-element",{createHTML:e=>e}):void 0,j=function(e){return X?X.createHTML(e):e};var y=Symbol("html"),B=new WeakMap;function v(e,...t){let n=B.get(e);if(n){let[s,r]=n;return{strings:e,template:s,expressions:t,symbol:y,marker:r}}else{let s=`x-${D()}-x`,r="",o=e.length-1;for(let a=0;a<o;a++)r+=`${e[a]}${s}`;r+=e[o];let i=document.createElement("template");return i.innerHTML=j(r),B.set(e,[i,s]),{strings:e,template:i,expressions:t,symbol:y,marker:s}}}var he=1+4,V=3,q=1,I=function(e,t){if(t?.symbol===y)if(e=e??{},t=t??{},e.strings===t.strings){let n=this.actions.length;for(let s=0;s<n;s++)this.actions[s](e.expressions[s],t.expressions[s])}else{this.actions.length=0;let n=t.template.content.cloneNode(!0);F(n,this.actions,t.marker);let s=this.actions.length;for(let r=0;r<s;r++)this.actions[r](e.expressions?.[r],t.expressions[r]);document.adoptNode(n),N(this.start,this.end),this.end.parentNode?.insertBefore(n,this.end)}else if(t?.constructor===Array){e=e??[],t=t??[];let n=e.length,s=t.length,r=Math.min(n,s);for(let o=0;o<r;o++)this.actions[o](e[o],t[o]);if(n<s){let o=document.createElement("template");for(let i=n;i<s;i++){let a=document.createTextNode(""),c=document.createTextNode(""),l=I.bind({start:a,end:c,actions:[]});o.content.appendChild(a),o.content.appendChild(c),this.actions.push(l),l(e[i],t[i])}this.end.parentNode?.insertBefore(o.content,this.end)}else if(n>s){for(let o=n-1;o>s-1;o--)if(e[o]?.symbol===y){let{template:i}=e[o],a=i.content.childNodes.length+2;for(;a--;)this.end.parentNode?.removeChild(this.end.previousSibling)}else this.end.parentNode?.removeChild(this.end.previousSibling),this.end.parentNode?.removeChild(this.end.previousSibling),this.end.parentNode?.removeChild(this.end.previousSibling);this.actions.length=s}}else{if(e===t)return;this.end.previousSibling===this.start?this.end.parentNode?.insertBefore(document.createTextNode(u(t)),this.end):this.end.previousSibling?.nodeType===V&&this.end.previousSibling?.previousSibling===this.start?this.end.previousSibling.textContent=u(t):(N(this.start,this.end),this.end.parentNode?.insertBefore(document.createTextNode(u(t)),this.end))}},ue=function(e,t){if(e!==t)if(w(e)?(this.element.removeAttribute(e),Reflect.set(this.element,e,null)):m(e)?typeof this.value=="function"&&this.element.removeEventListener(x(e),this.value,!0):E(e)?this.element.removeAttribute(e):g(e)?(this.element.removeAttribute(e),Reflect.set(this.element,e,!1)):e&&(this.element.removeAttribute(e),Reflect.deleteProperty(this.element,e)),this.name=t?.toLowerCase()||"",this.name){if(m(this.name))return;g(this.name)?(this.element.setAttribute(this.name,""),Reflect.set(this.element,this.name,!0)):(this.element.setAttribute(this.name,""),Reflect.set(this.element,this.name,void 0))}else return},pe=function(e,t){if(e!==t)if(w(this.name)){if(this.value=u(t),!this.name)return;this.element.setAttribute(this.name,this.value),Reflect.set(this.element,this.name,this.value)}else if(m(this.name)){if(!this.name)return;if(typeof this.value=="function"&&this.element.removeEventListener(x(this.name),this.value,!0),typeof t!="function")return console.warn(`XElement - attribute name "${this.name}" and value "${this.value}" not allowed`);this.value=function(){return t.call(this,...arguments)},this.element.addEventListener(x(this.name),this.value,!0)}else if(E(this.name)){if(this.value=encodeURI(t),!this.name)return;if(C(this.value)){this.element.removeAttribute(this.name),console.warn(`XElement - attribute name "${this.name}" and value "${this.value}" not allowed`);return}this.element.setAttribute(this.name,this.value)}else{if(this.value=t,!this.name)return;this.element.setAttribute(this.name,this.value),Reflect.set(this.element,this.name,this.value)}},me=function(e,t){if(e===t)return;let n=this.element;if(t){n.parentNode?.removeChild(n);let s=document.createElement(t);for(;n.firstChild;)s.appendChild(n.firstChild);if(n.nodeType===q){let r=n.getAttributeNames();for(let o of r){let i=n.getAttribute(o)??"";s.setAttribute(o,i)}}this.holder.parentNode?.insertBefore(s,this.holder),this.element=s}else n.parentNode?.removeChild(n),this.element=n},F=function(e,t,n){let s=new WeakSet,r=document.createTreeWalker(e,he,null);r.currentNode=e;let o=e.firstChild;for(;o=r.nextNode();)if(s.has(o.previousSibling)&&(s.delete(o.previousSibling),t.push(()=>{})),o.nodeType===V){let i=o.nodeValue?.indexOf(n)??-1;if(i===-1)continue;i!==0&&(o.splitText(i),o=r.nextNode());let a=n.length;a!==o.nodeValue?.length&&o.splitText(a);let c=document.createTextNode(""),l=o;l.textContent="",l.parentNode?.insertBefore(c,l),t.push(I.bind({marker:n,start:c,end:l,actions:[]}))}else if(o.nodeType===q){(o.nodeName==="SCRIPT"||o.nodeName==="STYLE")&&r.nextSibling();let i={element:o};H(o.nodeName,n)&&(s.add(o),i.holder=document.createTextNode(""),o.parentNode?.insertBefore(i.holder,o),t.push(me.bind(i)));let a=o.getAttributeNames();for(let c of a){let l=o.getAttribute(c)??"";if(f(c,n)||f(l,n)){let $={name:c,value:l,previous:void 0,get element(){return i.element}};f(c,n)&&(o.removeAttribute(c),t.push(ue.bind($))),f(l,n)&&(o.removeAttribute(c),t.push(pe.bind($)))}else E(c)?C(l)&&(o.removeAttribute(c),console.warn(`XElement - attribute name "${c}" and value "${l}" not allowed`)):m(c)&&(o.removeAttribute(c),console.warn(`XElement - attribute name "${c}" not allowed`))}}else console.warn(`XElement - node type "${o.nodeType}" not handled`)},W=F;var K=function(e,t,n,s,r){if(typeof n=="symbol")return Reflect.set(t,n,s,r);let o=Reflect.get(t,n,r);return o===s||Number.isNaN(o)&&Number.isNaN(s)||(Reflect.set(t,n,s,r),e()),!0},U=function(e,t,n,s){if(typeof n=="symbol")return Reflect.get(t,n,s);let r=Reflect.get(t,n,s);if(r){if(r.constructor===Function)return new Proxy(r,{apply(o,i,a){return Reflect.apply(o,s,a)}});if(r.constructor===Object||r.constructor===Array)return new Proxy(r,{get:U.bind(null,e),set:K.bind(null,e),deleteProperty:_.bind(null,e)})}return r},_=function(e,t,n){return typeof n=="symbol"?Reflect.deleteProperty(t,n):(Reflect.deleteProperty(t,n),e(),!0)},fe=function(e,t){return new Proxy(e,{get:U.bind(null,t),set:K.bind(null,t),deleteProperty:_.bind(null,t)})},z=fe;function h(e){return e=e.replace(/([a-zA-Z])([A-Z])/g,"$1-$2"),e=e.toLowerCase(),e=e.includes("-")?e:`x-${e}`,e}var Z=new Event("adopted"),G=new Event("adopting"),Se=new Event("upgraded"),ke=new Event("upgrading"),J=new Event("creating"),Y=new Event("created"),Q=new Event("rendering"),ee=new Event("rendered"),R=new Event("connected"),A=new Event("connecting"),te=new Event("attributed"),ne=new Event("attributing"),oe=new Event("disconnected"),se=new Event("disconnecting");var p=Symbol("Task"),b=Symbol("Update"),L=Symbol("Create"),ye=()=>Promise.resolve(),d=class extends HTMLElement{static html=v;static define(t=this.tag??this.name){return t=h(t),customElements.get(t)!==this&&customElements.define(t,this),this}static create(t){t=h(this.tag??this.name),customElements.get(t)!==this&&customElements.define(t,this);let n=document.createElement(t);return customElements.upgrade&&customElements.upgrade(n),n}static async upgrade(t){t=h(this.tag??this.name),customElements.get(t)!==this&&customElements.define(t,this);let n=document.createElement(t);return await n[L](),customElements.upgrade&&customElements.upgrade(n),n}static tag;static shadow;static mode;static observedProperties;#e={};#r;#a="";#o=[];#i=[];#t=!1;#n=!1;#s=!1;#c=!1;[p]=Promise.resolve();constructor(){super();let t=this.constructor;if(t.shadow&&!this.shadowRoot){let s=t.mode||"open";this.attachShadow({mode:s})}this.#r=this.shadowRoot??this}async attributeChangedCallback(t,n,s){this.dispatchEvent(ne),await this.attribute?.(t,n,s)?.catch(console.error),this.dispatchEvent(te)}async adoptedCallback(){this.dispatchEvent(G),await this.adopted?.(this.#e)?.catch(console.error),this.dispatchEvent(Z)}async connectedCallback(){this.#c?(this.dispatchEvent(A),await this.connected?.(this.#e)?.catch(console.error),this.dispatchEvent(R)):await this[L]()}async disconnectedCallback(){this.dispatchEvent(se),await this.disconnected?.(this.#e)?.catch(console.error),this.dispatchEvent(oe)}async[L](){this.#c=!0,this.#t=!0,this.#n=!0;let n=this.constructor.observedProperties,s=Object.getPrototypeOf(this),r=n?n??[]:[...Object.getOwnPropertyNames(this),...Object.getOwnPropertyNames(s)];for(let i of r){if(i==="attributeChangedCallback"||i==="disconnectedCallback"||i==="connectedCallback"||i==="adoptedCallback"||i==="constructor"||i==="disconnected"||i==="attribute"||i==="connected"||i==="rendered"||i==="created"||i==="adopted"||i==="render"||i==="setup")continue;let a=Object.getOwnPropertyDescriptor(this,i)??Object.getOwnPropertyDescriptor(s,i);a&&a.configurable&&(typeof a.value=="function"&&(a.value=a.value.bind(this)),typeof a.get=="function"&&(a.get=a.get.bind(this)),typeof a.set=="function"&&(a.set=a.set.bind(this)),Object.defineProperty(this.#e,i,a),Object.defineProperty(this,i,{configurable:!1,enumerable:a.enumerable,get(){return this.#e[i]},set(c){this.#e[i]=c,this[b]()}}))}this.#e=z(this.#e,this[b].bind(this));let o=await this.render?.(this.#e);if(o){let i=o.template.content.cloneNode(!0);this.#a=o.marker,this.#i=o.expressions,W(i,this.#o,this.#a);for(let a=0;a<this.#o.length;a++){let c=o.expressions[a];try{this.#o[a](void 0,c)}catch(l){console.error(l)}}document.adoptNode(i),this.#r.appendChild(i)}this.dispatchEvent(J),await this.created?.(this.#e),this.dispatchEvent(Y),this.dispatchEvent(A),await this.connected?.(this.#e)?.catch(console.error),this.dispatchEvent(R),this.#t=!1,this.#n=!1,this.#s=!1,await this[b]()}async[b](){return this.#t&&!this.#n?this[p]:this.#t&&this.#n?(this.#s=!0,this[p]):(this.#t=!0,this[p]=this[p].then(async()=>{this.dispatchEvent(Q);let t=await this.render?.(this.#e);if(this.#n=!0,t)for(let n=0;n<this.#o.length;n++){if(this.#s){await ye(),n=-1,this.#s=!1;continue}let s=t.expressions[n],r=this.#i[n];try{this.#o[n](r,s)}catch(o){console.error(o)}this.#i[n]=t.expressions[n]}this.#t=!1,this.#n=!1,await this.rendered?.(this.#e),this.dispatchEvent(ee)}).catch(console.error),this[p])}};function P(e,t){customElements.get(e)!==t&&customElements.define(e,t)}var O=[],S=[],ie=function(e){if(e&&e instanceof d)return new Promise(t=>e.addEventListener("rendered",()=>requestAnimationFrame(()=>t(void 0)),{once:!0}))},M=async function(e){if(e.instance){let t=ie(e.instance);T(e.root,e.instance),await t}else{let t=await e.handler();if(t?.prototype instanceof HTMLElement)e.construct=t;else if(t?.default?.prototype instanceof HTMLElement)e.construct=t.default;else throw new Error("XElement - router handler requires a CustomElementConstructor");e.construct.prototype instanceof d?e.instance=await e.construct.upgrade():(e.tag=h(e.construct.name),P(e.tag,e.construct),e.instance=document.createElement(e.tag));let n=ie(e.instance);T(e.root,e.instance),await n}},ve=function(e){if(e&&"canIntercept"in e&&e.canIntercept===!1||e&&"canTransition"in e&&e.canTransition===!1)return;let t=new URL(e?.destination.url??location.href),n=new URL(document.querySelector("base")?.href??location.origin);n.hash="",n.search="",t.hash="",t.search="";let s=t.href.replace(n.href,"/"),r=[];for(let o of S)o.path===s&&r.push(o);for(let o of O){let i=!1;for(let a of r)if(a.root===o.root){i=!0;break}i||r.push(o)}if(e?.intercept)return e.intercept({handler:async()=>{await Promise.all(r.map(o=>M(o)))}});if(e?.transitionWhile)return e.transitionWhile(Promise.all(r.map(o=>M(o))));Promise.all(r.map(o=>M(o)))},Ee=function(e,t,n){if(!e)throw new Error("XElement - router path required");if(!n)throw new Error("XElement - router handler required");if(!t)throw new Error("XElement - router root required");if(e==="/*"){for(let s of O)if(s.path===e&&s.root===t)throw new Error("XElement - router duplicate path on root");O.push({path:e,root:t,handler:n})}else{for(let s of S)if(s.path===e&&s.root===t)throw new Error("XElement - router duplicate path on root");S.push({path:e,root:t,handler:n,instance:void 0})}Reflect.get(window,"navigation").addEventListener("navigate",ve)},k=Ee;var Ge={Component:d,component:d,Router:k,router:k,html:v};export{d as Component,k as Router,d as component,Ge as default,v as html,k as router};
//# sourceMappingURL=esnext.min.js.map
