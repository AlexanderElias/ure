/**
 * @version 9.1.10
 *
 * @license
 * Copyright (C) Alexander Elias
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @module
 */

var ae=["src","href","data","action","srcdoc","xlink:href","cite","formaction","ping","poster","background","classid","codebase","longdesc","profile","usemap","icon","manifest","archive"],ce=["hidden","allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],b=function(e){return e&&typeof e=="string"?ae.indexOf(e)!==-1:!1},C=function(e){return e&&typeof e=="string"?ce.indexOf(e)!==-1:!1},le=/^value$/i,N=function(e){return e&&typeof e=="string"?le.test(e):!1},de=/^on/i,m=function(e){return e&&typeof e=="string"?de.test(e):!1},g=function(e){return e&&typeof e=="string"?e?.toLowerCase()?.slice(2):""},D=function(e,t){return e&&typeof e=="string"?e.toLowerCase()===t.toLowerCase():!1},y=function(e,t){return e&&typeof e=="string"?e.toLowerCase().indexOf(t.toLowerCase())!==-1:!1};var he=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i,T=function(e){return e===""||typeof e!="string"?!1:!he.test(e)},R=function(e,t){let n=t.previousSibling;for(;n!==e;)n?.parentNode?.removeChild(n),n=t.previousSibling};function f(e){switch(`${e}`){case"NaN":return"";case"null":return"";case"undefined":return""}switch(typeof e){case"string":return e;case"number":return`${e}`;case"bigint":return`${e}`;case"boolean":return`${e}`;case"function":return`${e()}`;case"symbol":return String(e);case"object":return JSON.stringify(e)}throw new Error("XElement - display type not handled")}var X=()=>Math.floor(Math.random()*Date.now());var A=function(e,...t){for(;e.lastChild;)e.removeChild(e.lastChild);if(t?.length)for(let n of t)e.appendChild(typeof n=="string"?e.ownerDocument.createTextNode(n):n)},j="trustedTypes"in window?window.trustedTypes.createPolicy("x-element",{createHTML:e=>e}):void 0,B=function(e){return j?j.createHTML(e):e};var v=Symbol("html"),V=new WeakMap;function x(e,...t){let n=V.get(e);if(n){let[i,r]=n;return{strings:e,template:i,expressions:t,symbol:v,marker:r}}else{let i=`x-${X()}-x`,r="",o=e.length-1;for(let a=0;a<o;a++)r+=`${e[a]}${i}`;r+=e[o];let s=document.createElement("template");return s.innerHTML=B(r),V.set(e,[s,i]),{strings:e,template:s,expressions:t,symbol:v,marker:i}}}var ue=1+4,q=3,F=1,I=function(e,t){if(t?.symbol===v)if(e=e??{},t=t??{},e.strings===t.strings){let n=this.actions.length;for(let i=0;i<n;i++)this.actions[i](e.expressions[i],t.expressions[i])}else{this.actions.length=0;let n=t.template.content.cloneNode(!0);W(n,this.actions,t.marker);let i=this.actions.length;for(let r=0;r<i;r++)this.actions[r](e.expressions?.[r],t.expressions[r]);document.adoptNode(n),R(this.start,this.end),this.end.parentNode?.insertBefore(n,this.end)}else if(t?.constructor===Array){e=e??[],t=t??[];let n=e.length,i=t.length,r=Math.min(n,i);for(let o=0;o<r;o++)this.actions[o](e[o],t[o]);if(n<i){let o=document.createElement("template");for(let s=n;s<i;s++){let a=document.createTextNode(""),c=document.createTextNode(""),l=I.bind({start:a,end:c,actions:[]});o.content.appendChild(a),o.content.appendChild(c),this.actions.push(l),l(e[s],t[s])}this.end.parentNode?.insertBefore(o.content,this.end)}else if(n>i){for(let o=n-1;o>i-1;o--)if(e[o]?.symbol===v){let{template:s}=e[o],a=s.content.childNodes.length+2;for(;a--;)this.end.parentNode?.removeChild(this.end.previousSibling)}else this.end.parentNode?.removeChild(this.end.previousSibling),this.end.parentNode?.removeChild(this.end.previousSibling),this.end.parentNode?.removeChild(this.end.previousSibling);this.actions.length=i}}else{if(e===t)return;this.end.previousSibling===this.start?this.end.parentNode?.insertBefore(document.createTextNode(f(t)),this.end):this.end.previousSibling?.nodeType===q&&this.end.previousSibling?.previousSibling===this.start?this.end.previousSibling.textContent=f(t):(R(this.start,this.end),this.end.parentNode?.insertBefore(document.createTextNode(f(t)),this.end))}},pe=function(e,t){if(e!==t)if(N(e)?(this.element.removeAttribute(e),Reflect.set(this.element,e,null)):m(e)?typeof this.value=="function"&&this.element.removeEventListener(g(e),this.value,!0):b(e)?this.element.removeAttribute(e):C(e)?(this.element.removeAttribute(e),Reflect.set(this.element,e,!1)):e&&(this.element.removeAttribute(e),Reflect.deleteProperty(this.element,e)),this.name=t?.toLowerCase()||"",this.name){if(m(this.name))return;C(this.name)?(this.element.setAttribute(this.name,""),Reflect.set(this.element,this.name,!0)):(this.element.setAttribute(this.name,""),Reflect.set(this.element,this.name,void 0))}else return},fe=function(e,t){if(e!==t)if(N(this.name)){if(this.value=f(t),!this.name)return;this.element.setAttribute(this.name,this.value),Reflect.set(this.element,this.name,this.value)}else if(m(this.name)){if(!this.name)return;if(typeof this.value=="function"&&this.element.removeEventListener(g(this.name),this.value,!0),typeof t!="function")return console.warn(`XElement - attribute name "${this.name}" and value "${this.value}" not allowed`);this.value=function(){return t.call(this,...arguments)},this.element.addEventListener(g(this.name),this.value,!0)}else if(b(this.name)){if(this.value=encodeURI(t),!this.name)return;if(T(this.value)){this.element.removeAttribute(this.name),console.warn(`XElement - attribute name "${this.name}" and value "${this.value}" not allowed`);return}this.element.setAttribute(this.name,this.value)}else{if(this.value=t,!this.name)return;this.element.setAttribute(this.name,this.value),Reflect.set(this.element,this.name,this.value)}},me=function(e,t){if(e===t)return;let n=this.element;if(t){n.parentNode?.removeChild(n);let i=document.createElement(t);for(;n.firstChild;)i.appendChild(n.firstChild);if(n.nodeType===F){let r=n.getAttributeNames();for(let o of r){let s=n.getAttribute(o)??"";i.setAttribute(o,s)}}this.holder.parentNode?.insertBefore(i,this.holder),this.element=i}else n.parentNode?.removeChild(n),this.element=n},W=function(e,t,n){let i=new WeakSet,r=document.createTreeWalker(e,ue,null);r.currentNode=e;let o=e.firstChild;for(;o=r.nextNode();)if(i.has(o.previousSibling)&&(i.delete(o.previousSibling),t.push(()=>{})),o.nodeType===q){let s=o.nodeValue?.indexOf(n)??-1;if(s===-1)continue;s!==0&&(o.splitText(s),o=r.nextNode());let a=n.length;a!==o.nodeValue?.length&&o.splitText(a);let c=document.createTextNode(""),l=o;l.textContent="",l.parentNode?.insertBefore(c,l),t.push(I.bind({marker:n,start:c,end:l,actions:[]}))}else if(o.nodeType===F){(o.nodeName==="SCRIPT"||o.nodeName==="STYLE")&&r.nextSibling();let s={element:o};D(o.nodeName,n)&&(i.add(o),s.holder=document.createTextNode(""),o.parentNode?.insertBefore(s.holder,o),t.push(me.bind(s)));let a=o.getAttributeNames();for(let c of a){let l=o.getAttribute(c)??"";if(y(c,n)||y(l,n)){let H={name:c,value:l,previous:void 0,get element(){return s.element}};y(c,n)&&(o.removeAttribute(c),t.push(pe.bind(H))),y(l,n)&&(o.removeAttribute(c),t.push(fe.bind(H)))}else b(c)?T(l)&&(o.removeAttribute(c),console.warn(`XElement - attribute name "${c}" and value "${l}" not allowed`)):m(c)&&(o.removeAttribute(c),console.warn(`XElement - attribute name "${c}" not allowed`))}}else console.warn(`XElement - node type "${o.nodeType}" not handled`)},K=W;var U=function(e,t,n,i,r){if(typeof n=="symbol")return Reflect.set(t,n,i,r);let o=Reflect.get(t,n,r);return o===i||Number.isNaN(o)&&Number.isNaN(i)||(Reflect.set(t,n,i,r),e()),!0},_=function(e,t,n,i){if(typeof n=="symbol")return Reflect.get(t,n,i);let r=Reflect.get(t,n,i);if(r){if(r.constructor===Function)return new Proxy(r,{apply(o,s,a){return Reflect.apply(o,i,a)}});if(r.constructor===Object||r.constructor===Array)return new Proxy(r,{get:_.bind(null,e),set:U.bind(null,e),deleteProperty:z.bind(null,e)})}return r},z=function(e,t,n){return typeof n=="symbol"?Reflect.deleteProperty(t,n):(Reflect.deleteProperty(t,n),e(),!0)},ye=function(e,t){return new Proxy(e,{get:_.bind(null,t),set:U.bind(null,t),deleteProperty:z.bind(null,t)})},Z=ye;function u(e){return e=e.replace(/([a-zA-Z])([A-Z])/g,"$1-$2"),e=e.toLowerCase(),e=e.includes("-")?e:`x-${e}`,e}var G=new Event("adopted"),J=new Event("adopting"),ke=new Event("upgraded"),$e=new Event("upgrading"),Y=new Event("creating"),Q=new Event("created"),ee=new Event("rendering"),te=new Event("rendered"),P=new Event("connected"),L=new Event("connecting"),ne=new Event("attributed"),oe=new Event("attributing"),ie=new Event("disconnected"),se=new Event("disconnecting");function p(e,t){customElements.get(e)!==t&&customElements.define(e,t)}var E=e=>{customElements.upgrade&&customElements.upgrade(e)};var ve=()=>Promise.resolve(),h=Symbol("Task"),w=Symbol("Update"),M=Symbol("Create"),d=class extends HTMLElement{static html=x;static define(t=this.tag??this.name){return t=u(t),p(t,this),this}static create(t){t=u(this.tag??this.name),p(t,this);let n=document.createElement(t);return E(n),n}static async upgrade(t){t=u(this.tag??this.name),p(t,this);let n=document.createElement(t);return E(n),await n[M](),n}static tag;static shadow;static mode;static observedProperties;#e={};#r;#a="";#o=[];#s=[];#t=!1;#n=!1;#i=!1;#c=!1;[h]=Promise.resolve();constructor(){super();let t=this.constructor;if(t.shadow&&!this.shadowRoot){let i=t.mode||"open";this.attachShadow({mode:i})}this.#r=this.shadowRoot??this}async attributeChangedCallback(t,n,i){this.dispatchEvent(oe),await this.attribute?.(t,n,i)?.catch(console.error),this.dispatchEvent(ne)}async adoptedCallback(){this.dispatchEvent(J),await this.adopted?.(this.#e)?.catch(console.error),this.dispatchEvent(G)}async connectedCallback(){this.#c?(this.dispatchEvent(L),await this.connected?.(this.#e)?.catch(console.error),this.dispatchEvent(P)):await this[M]()}async disconnectedCallback(){this.dispatchEvent(se),await this.disconnected?.(this.#e)?.catch(console.error),this.dispatchEvent(ie)}async[M](){this.#c=!0,this.#t=!0,this.#n=!0;let n=this.constructor.observedProperties,i=Object.getPrototypeOf(this),r=n?n??[]:[...Object.getOwnPropertyNames(this),...Object.getOwnPropertyNames(i)];for(let s of r){if(s==="attributeChangedCallback"||s==="disconnectedCallback"||s==="connectedCallback"||s==="adoptedCallback"||s==="constructor"||s==="disconnected"||s==="attribute"||s==="connected"||s==="rendered"||s==="created"||s==="adopted"||s==="render"||s==="setup")continue;let a=Object.getOwnPropertyDescriptor(this,s)??Object.getOwnPropertyDescriptor(i,s);a&&a.configurable&&(typeof a.value=="function"&&(a.value=a.value.bind(this)),typeof a.get=="function"&&(a.get=a.get.bind(this)),typeof a.set=="function"&&(a.set=a.set.bind(this)),Object.defineProperty(this.#e,s,a),Object.defineProperty(this,s,{configurable:!1,enumerable:a.enumerable,get(){return this.#e[s]},set(c){this.#e[s]=c,this[w]()}}))}this.#e=Z(this.#e,this[w].bind(this));let o=await this.render?.(this.#e);if(o){let s=o.template.content.cloneNode(!0);this.#a=o.marker,this.#s=o.expressions,K(s,this.#o,this.#a);for(let a=0;a<this.#o.length;a++){let c=o.expressions[a];try{this.#o[a](void 0,c)}catch(l){console.error(l)}}document.adoptNode(s),this.#r.appendChild(s)}this.dispatchEvent(Y),await this.created?.(this.#e),this.dispatchEvent(Q),this.dispatchEvent(L),await this.connected?.(this.#e)?.catch(console.error),this.dispatchEvent(P),this.#t=!1,this.#n=!1,this.#i=!1,await this[w]()}async[w](){return this.#t&&!this.#n?this[h]:this.#t&&this.#n?(this.#i=!0,this[h]):(this.#t=!0,this[h]=this[h].then(async()=>{this.dispatchEvent(ee);let t=await this.render?.(this.#e);if(this.#n=!0,t)for(let n=0;n<this.#o.length;n++){if(this.#i){await ve(),n=-1,this.#i=!1;continue}let i=t.expressions[n],r=this.#s[n];try{this.#o[n](r,i)}catch(o){console.error(o)}this.#s[n]=t.expressions[n]}this.#t=!1,this.#n=!1,await this.rendered?.(this.#e),this.dispatchEvent(te)}).catch(console.error),this[h])}};var S=[],k=[],re=function(e){return new Promise(async t=>{e&&e instanceof d?(await e[h],requestAnimationFrame(()=>t(void 0))):requestAnimationFrame(()=>t(void 0))})},O=async function(e){if(e.instance){let t=re(e.instance);A(e.root,e.instance),await t}else{let t=await e.handler();if(t?.prototype instanceof HTMLElement)e.construct=t;else if(t?.default?.prototype instanceof HTMLElement)e.construct=t.default;else throw new Error("XElement - router handler requires Module or CustomElementConstructor");e.construct.prototype instanceof d?e.instance=await e.construct.create():(e.tag=u(e.construct.name),p(e.tag,e.construct),e.instance=document.createElement(e.tag),E(e.instance));let n=re(e.instance);A(e.root,e.instance),await n}},xe=function(e){if(e&&"canIntercept"in e&&e.canIntercept===!1||e&&"canTransition"in e&&e.canTransition===!1)return;let t=new URL(e?.destination.url??location.href),n=new URL(document.querySelector("base")?.href??location.origin);n.hash="",n.search="",t.hash="",t.search="";let i=t.href.replace(n.href,"/"),r=[];for(let o of k)o.path===i&&r.push(o);for(let o of S){let s=!1;for(let a of r)if(a.root===o.root){s=!0;break}s||r.push(o)}if(e?.intercept)return e.intercept({handler:async()=>{await Promise.all(r.map(o=>O(o)))}});if(e?.transitionWhile)return e.transitionWhile(Promise.all(r.map(o=>O(o))));Promise.all(r.map(o=>O(o)))},Ee=function(e,t,n){if(!e)throw new Error("XElement - router path required");if(!n)throw new Error("XElement - router handler required");if(!t)throw new Error("XElement - router root required");if(e==="/*"){for(let i of S)if(i.path===e&&i.root===t)throw new Error("XElement - router duplicate path on root");S.push({path:e,root:t,handler:n})}else{for(let i of k)if(i.path===e&&i.root===t)throw new Error("XElement - router duplicate path on root");k.push({path:e,root:t,handler:n,instance:void 0})}Reflect.get(window,"navigation").addEventListener("navigate",xe)},$=Ee;var tt={Component:d,component:d,Router:$,router:$,html:x};export{d as Component,$ as Router,d as component,tt as default,x as html,$ as router};
//# sourceMappingURL=esnext.min.js.map
