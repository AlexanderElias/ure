<base href="/">
<title>XElement Performance</title>
<script>document.querySelector('base').href = location.pathname.startsWith('/element') ? '/element/performance/' : '/';</script>
<link rel="stylesheet" href="./index.css">

<h1>XElement Performance</h1>

<o-loop></o-loop>

<script type="module">
    import { Component } from '../x-element.js';

    const context = () => ({

        items: [],
        message: '',
        count: 100000,

        oninput(e) {
            this.count = e.target.valueAsNumber;
        },

        push() {
            console.time('push');
            for (var i = 0; i < this.count; i++) this.items.push(i);
            console.timeEnd('push');
        },

        overwrite() {
            console.time('overwrite');
            var items = [];
            for (var i = 0; i < this.count; i++) items.push(i);
            this.items = items;
            console.timeEnd('overwrite');
        },

        clear() {
            this.items = [];
        },

    });

    const component = ({ h2, input, button, div, br, select, option }, c) => [

        h2(`Count: ${c.count.toLocaleString()}`),
        input().oninput(c.oninput).value(c.count).type('number'),
        button('push').onclick(c.push),
        button('overwrite').onclick(c.overwrite),
        button('clear').onclick(c.clear),
        div(...c.items.map(item => div(`${item}`).class('box'))),

    ];

    class OLoop extends Component {
        static context = context;
        static component = component;
        static options = { root: 'this', slot: 'default' };
    }

    OLoop.define();

</script>